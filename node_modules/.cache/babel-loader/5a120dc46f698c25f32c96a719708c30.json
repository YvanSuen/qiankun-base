{"remainingRequest":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js!D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\qiankun\\es\\apis.js","dependencies":[{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\qiankun\\es\\apis.js","mtime":1631881155000},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618900774989},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js","mtime":1618886346176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX25vb3AgZnJvbSAibG9kYXNoL25vb3AiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IHsgX19hd2FpdGVyLCBfX3Jlc3QgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IG1vdW50Um9vdFBhcmNlbCwgcmVnaXN0ZXJBcHBsaWNhdGlvbiwgc3RhcnQgYXMgc3RhcnRTaW5nbGVTcGEgfSBmcm9tICdzaW5nbGUtc3BhJzsKaW1wb3J0IHsgbG9hZEFwcCB9IGZyb20gJy4vbG9hZGVyJzsKaW1wb3J0IHsgZG9QcmVmZXRjaFN0cmF0ZWd5IH0gZnJvbSAnLi9wcmVmZXRjaCc7CmltcG9ydCB7IERlZmVycmVkLCBnZXRDb250YWluZXJYUGF0aCwgdG9BcnJheSB9IGZyb20gJy4vdXRpbHMnOwp2YXIgbWljcm9BcHBzID0gW107CmV4cG9ydCB2YXIgZnJhbWV3b3JrQ29uZmlndXJhdGlvbiA9IHt9Owp2YXIgc3RhcnRlZCA9IGZhbHNlOwp2YXIgZGVmYXVsdFVybFJlcm91dGVPbmx5ID0gdHJ1ZTsKdmFyIGZyYW1ld29ya1N0YXJ0ZWREZWZlciA9IG5ldyBEZWZlcnJlZCgpOwoKdmFyIGF1dG9Eb3duZ3JhZGVGb3JMb3dWZXJzaW9uQnJvd3NlciA9IGZ1bmN0aW9uIGF1dG9Eb3duZ3JhZGVGb3JMb3dWZXJzaW9uQnJvd3Nlcihjb25maWd1cmF0aW9uKSB7CiAgdmFyIHNhbmRib3ggPSBjb25maWd1cmF0aW9uLnNhbmRib3gsCiAgICAgIHNpbmd1bGFyID0gY29uZmlndXJhdGlvbi5zaW5ndWxhcjsKCiAgaWYgKHNhbmRib3gpIHsKICAgIGlmICghd2luZG93LlByb3h5KSB7CiAgICAgIGNvbnNvbGUud2FybignW3FpYW5rdW5dIE1pc3Mgd2luZG93LlByb3h5LCBwcm94eVNhbmRib3ggd2lsbCBkZWdlbmVyYXRlIGludG8gc25hcHNob3RTYW5kYm94Jyk7CgogICAgICBpZiAoc2luZ3VsYXIgPT09IGZhbHNlKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdbcWlhbmt1bl0gU2V0dGluZyBzaW5ndWxhciBhcyBmYWxzZSBtYXkgY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvciB3aGlsZSB5b3VyIGJyb3dzZXIgbm90IHN1cHBvcnQgd2luZG93LlByb3h5Jyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3VyYXRpb24pLCB7CiAgICAgICAgc2FuZGJveDogX3R5cGVvZihzYW5kYm94KSA9PT0gJ29iamVjdCcgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNhbmRib3gpLCB7CiAgICAgICAgICBsb29zZTogdHJ1ZQogICAgICAgIH0pIDogewogICAgICAgICAgbG9vc2U6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIGNvbmZpZ3VyYXRpb247Cn07CgpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJNaWNyb0FwcHMoYXBwcywgbGlmZUN5Y2xlcykgewogIHZhciBfdGhpcyA9IHRoaXM7IC8vIEVhY2ggYXBwIG9ubHkgbmVlZHMgdG8gYmUgcmVnaXN0ZXJlZCBvbmNlCgoKICB2YXIgdW5yZWdpc3RlcmVkQXBwcyA9IGFwcHMuZmlsdGVyKGZ1bmN0aW9uIChhcHApIHsKICAgIHJldHVybiAhbWljcm9BcHBzLnNvbWUoZnVuY3Rpb24gKHJlZ2lzdGVyZWRBcHApIHsKICAgICAgcmV0dXJuIHJlZ2lzdGVyZWRBcHAubmFtZSA9PT0gYXBwLm5hbWU7CiAgICB9KTsKICB9KTsKICBtaWNyb0FwcHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG1pY3JvQXBwcyksIF90b0NvbnN1bWFibGVBcnJheSh1bnJlZ2lzdGVyZWRBcHBzKSk7CiAgdW5yZWdpc3RlcmVkQXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChhcHApIHsKICAgIHZhciBuYW1lID0gYXBwLm5hbWUsCiAgICAgICAgYWN0aXZlUnVsZSA9IGFwcC5hY3RpdmVSdWxlLAogICAgICAgIF9hcHAkbG9hZGVyID0gYXBwLmxvYWRlciwKICAgICAgICBsb2FkZXIgPSBfYXBwJGxvYWRlciA9PT0gdm9pZCAwID8gX25vb3AgOiBfYXBwJGxvYWRlciwKICAgICAgICBwcm9wcyA9IGFwcC5wcm9wcywKICAgICAgICBhcHBDb25maWcgPSBfX3Jlc3QoYXBwLCBbIm5hbWUiLCAiYWN0aXZlUnVsZSIsICJsb2FkZXIiLCAicHJvcHMiXSk7CgogICAgcmVnaXN0ZXJBcHBsaWNhdGlvbih7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGFwcDogZnVuY3Rpb24gYXBwKCkgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgdmFyIF9hLCBtb3VudCwgb3RoZXJNaWNyb0FwcENvbmZpZ3M7CgogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGxvYWRlcih0cnVlKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWV3b3JrU3RhcnRlZERlZmVyLnByb21pc2U7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBsb2FkQXBwKE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHByb3BzCiAgICAgICAgICAgICAgICAgIH0sIGFwcENvbmZpZyksIGZyYW1ld29ya0NvbmZpZ3VyYXRpb24sIGxpZmVDeWNsZXMpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICAgIF9hID0gKDAsIF9jb250ZXh0My50MCkoKTsKICAgICAgICAgICAgICAgICAgbW91bnQgPSBfYS5tb3VudDsKICAgICAgICAgICAgICAgICAgb3RoZXJNaWNyb0FwcENvbmZpZ3MgPSBfX3Jlc3QoX2EsIFsibW91bnQiXSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBPYmplY3QuYXNzaWduKHsKICAgICAgICAgICAgICAgICAgICBtb3VudDogW2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMyLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGxvYWRlcih0cnVlKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodG9BcnJheShtb3VudCkpLCBbZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczIsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbG9hZGVyKGZhbHNlKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfV0pCiAgICAgICAgICAgICAgICAgIH0sIG90aGVyTWljcm9BcHBDb25maWdzKSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgIH0pKTsKICAgICAgfSwKICAgICAgYWN0aXZlV2hlbjogYWN0aXZlUnVsZSwKICAgICAgY3VzdG9tUHJvcHM6IHByb3BzCiAgICB9KTsKICB9KTsKfQp2YXIgYXBwQ29uZmlnUHJvbWlzZUdldHRlck1hcCA9IG5ldyBNYXAoKTsKdmFyIGNvbnRhaW5lck1pY3JvQXBwc01hcCA9IG5ldyBNYXAoKTsKZXhwb3J0IGZ1bmN0aW9uIGxvYWRNaWNyb0FwcChhcHAsIGNvbmZpZ3VyYXRpb24sIGxpZmVDeWNsZXMpIHsKICB2YXIgX3RoaXMzID0gdGhpczsKCiAgdmFyIF9hOwoKICB2YXIgcHJvcHMgPSBhcHAucHJvcHMsCiAgICAgIG5hbWUgPSBhcHAubmFtZTsKICB2YXIgY29udGFpbmVyID0gJ2NvbnRhaW5lcicgaW4gYXBwID8gYXBwLmNvbnRhaW5lciA6IHVuZGVmaW5lZDsgLy8gTXVzdCBjb21wdXRlIHRoZSBjb250YWluZXIgeHBhdGggYXQgYmVnaW5uaW5nIHRvIGtlZXAgaXQgY29uc2lzdCBhcm91bmQgYXBwIHJ1bm5pbmcKICAvLyBJZiB3ZSBjb21wdXRlIGl0IGV2ZXJ5IHRpbWUsIHRoZSBjb250YWluZXIgZG9tIHN0cnVjdHVyZSBtb3N0IHByb2JhYmx5IGJlZW4gY2hhbmdlZCBhbmQgcmVzdWx0IGluIGEgZGlmZmVyZW50IHhwYXRoIHZhbHVlCgogIHZhciBjb250YWluZXJYUGF0aCA9IGdldENvbnRhaW5lclhQYXRoKGNvbnRhaW5lcik7CiAgdmFyIGFwcENvbnRhaW5lclhQYXRoS2V5ID0gIiIuY29uY2F0KG5hbWUsICItIikuY29uY2F0KGNvbnRhaW5lclhQYXRoKTsKICB2YXIgbWljcm9BcHA7CgogIHZhciB3cmFwUGFyY2VsQ29uZmlnRm9yUmVtb3VudCA9IGZ1bmN0aW9uIHdyYXBQYXJjZWxDb25maWdGb3JSZW1vdW50KGNvbmZpZykgewogICAgdmFyIG1pY3JvQXBwQ29uZmlnID0gY29uZmlnOwoKICAgIGlmIChjb250YWluZXIpIHsKICAgICAgaWYgKGNvbnRhaW5lclhQYXRoKSB7CiAgICAgICAgdmFyIGNvbnRhaW5lck1pY3JvQXBwcyA9IGNvbnRhaW5lck1pY3JvQXBwc01hcC5nZXQoYXBwQ29udGFpbmVyWFBhdGhLZXkpOwoKICAgICAgICBpZiAoY29udGFpbmVyTWljcm9BcHBzID09PSBudWxsIHx8IGNvbnRhaW5lck1pY3JvQXBwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGFpbmVyTWljcm9BcHBzLmxlbmd0aCkgewogICAgICAgICAgdmFyIG1vdW50ID0gW2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgICAgICAgIHZhciBwcmV2TG9hZE1pY3JvQXBwcywgcHJldkxvYWRNaWNyb0FwcHNXaGljaE5vdEJyb2tlbjsKICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIC8vIFdoaWxlIHRoZXJlIGFyZSBtdWx0aXBsZSBtaWNybyBhcHBzIG1vdW50ZWQgb24gdGhlIHNhbWUgY29udGFpbmVyLCB3ZSBtdXN0IHdhaXQgdW50aWwgdGhlIHByZXYgaW5zdGFuY2VzIGFsbCBoYWQgdW5tb3VudGVkCiAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaXQgd2lsbCBsZWFkIHNvbWUgY29uY3VycmVudCBpc3N1ZXMKICAgICAgICAgICAgICAgICAgICAgIHByZXZMb2FkTWljcm9BcHBzID0gY29udGFpbmVyTWljcm9BcHBzLnNsaWNlKDAsIGNvbnRhaW5lck1pY3JvQXBwcy5pbmRleE9mKG1pY3JvQXBwKSk7CiAgICAgICAgICAgICAgICAgICAgICBwcmV2TG9hZE1pY3JvQXBwc1doaWNoTm90QnJva2VuID0gcHJldkxvYWRNaWNyb0FwcHMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2LmdldFN0YXR1cygpICE9PSAnTE9BRF9FUlJPUicgJiYgdi5nZXRTdGF0dXMoKSAhPT0gJ1NLSVBfQkVDQVVTRV9CUk9LRU4nOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJldkxvYWRNaWNyb0FwcHNXaGljaE5vdEJyb2tlbi5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYudW5tb3VudFByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodG9BcnJheShtaWNyb0FwcENvbmZpZy5tb3VudCkpKTsKICAgICAgICAgIG1pY3JvQXBwQ29uZmlnID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7CiAgICAgICAgICAgIG1vdW50OiBtb3VudAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWljcm9BcHBDb25maWcpLCB7CiAgICAgIC8vIGVtcHR5IGJvb3RzdHJhcCBob29rIHdoaWNoIHNob3VsZCBub3QgcnVuIHR3aWNlIHdoaWxlIGl0IGNhbGxpbmcgZnJvbSBjYWNoZWQgbWljcm8gYXBwCiAgICAgIGJvb3RzdHJhcDogZnVuY3Rpb24gYm9vdHN0cmFwKCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfQogICAgfSk7CiAgfTsKICAvKioKICAgKiB1c2luZyBuYW1lICsgY29udGFpbmVyIHhwYXRoIGFzIHRoZSBtaWNybyBhcHAgaW5zdGFuY2UgaWQsCiAgICogaXQgbWVhbnMgaWYgeW91IHJlbmRlcmluZyBhIG1pY3JvIGFwcCB0byBhIGRvbSB3aGljaCBoYXZlIGJlZW4gcmVuZGVyZWQgYmVmb3JlLAogICAqIHRoZSBtaWNybyBhcHAgd291bGQgbm90IGxvYWQgYW5kIGV2YWx1YXRlIGl0cyBsaWZlY3ljbGVzIGFnYWluCiAgICovCgoKICB2YXIgbWVtb3JpemVkTG9hZGluZ0ZuID0gZnVuY3Rpb24gbWVtb3JpemVkTG9hZGluZ0ZuKCkgewogICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgdXNlckNvbmZpZ3VyYXRpb24sICQkY2FjaGVMaWZlY3ljbGVCeUFwcE5hbWUsIHBhcmNlbENvbmZpZ0dldHRlclByb21pc2UsIF9wYXJjZWxDb25maWdHZXR0ZXJQcm9taXNlLCBwYXJjZWxDb25maWdPYmplY3RHZXR0ZXJQcm9taXNlOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXNlckNvbmZpZ3VyYXRpb24gPSBhdXRvRG93bmdyYWRlRm9yTG93VmVyc2lvbkJyb3dzZXIoY29uZmlndXJhdGlvbiAhPT0gbnVsbCAmJiBjb25maWd1cmF0aW9uICE9PSB2b2lkIDAgPyBjb25maWd1cmF0aW9uIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBmcmFtZXdvcmtDb25maWd1cmF0aW9uKSwgewogICAgICAgICAgICAgICAgc2luZ3VsYXI6IGZhbHNlCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICQkY2FjaGVMaWZlY3ljbGVCeUFwcE5hbWUgPSB1c2VyQ29uZmlndXJhdGlvbi4kJGNhY2hlTGlmZWN5Y2xlQnlBcHBOYW1lOwoKICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCEkJGNhY2hlTGlmZWN5Y2xlQnlBcHBOYW1lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBwYXJjZWxDb25maWdHZXR0ZXJQcm9taXNlID0gYXBwQ29uZmlnUHJvbWlzZUdldHRlck1hcC5nZXQobmFtZSk7CgogICAgICAgICAgICAgIGlmICghcGFyY2VsQ29uZmlnR2V0dGVyUHJvbWlzZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gd3JhcFBhcmNlbENvbmZpZ0ZvclJlbW91bnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBwYXJjZWxDb25maWdHZXR0ZXJQcm9taXNlOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0NS50MSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NS50MiA9ICgwLCBfY29udGV4dDUudDEpKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsICgwLCBfY29udGV4dDUudDApKF9jb250ZXh0NS50MikpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lclhQYXRoKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfcGFyY2VsQ29uZmlnR2V0dGVyUHJvbWlzZSA9IGFwcENvbmZpZ1Byb21pc2VHZXR0ZXJNYXAuZ2V0KGFwcENvbnRhaW5lclhQYXRoS2V5KTsKCiAgICAgICAgICAgICAgaWYgKCFfcGFyY2VsQ29uZmlnR2V0dGVyUHJvbWlzZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ1LnQzID0gd3JhcFBhcmNlbENvbmZpZ0ZvclJlbW91bnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxODsKICAgICAgICAgICAgICByZXR1cm4gX3BhcmNlbENvbmZpZ0dldHRlclByb21pc2U7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0NS50NCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NS50NSA9ICgwLCBfY29udGV4dDUudDQpKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsICgwLCBfY29udGV4dDUudDMpKF9jb250ZXh0NS50NSkpOwoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBwYXJjZWxDb25maWdPYmplY3RHZXR0ZXJQcm9taXNlID0gbG9hZEFwcChhcHAsIHVzZXJDb25maWd1cmF0aW9uLCBsaWZlQ3ljbGVzKTsKCiAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgaWYgKCQkY2FjaGVMaWZlY3ljbGVCeUFwcE5hbWUpIHsKICAgICAgICAgICAgICAgICAgYXBwQ29uZmlnUHJvbWlzZUdldHRlck1hcC5zZXQobmFtZSwgcGFyY2VsQ29uZmlnT2JqZWN0R2V0dGVyUHJvbWlzZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lclhQYXRoKSBhcHBDb25maWdQcm9taXNlR2V0dGVyTWFwLnNldChhcHBDb250YWluZXJYUGF0aEtleSwgcGFyY2VsQ29uZmlnT2JqZWN0R2V0dGVyUHJvbWlzZSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI1OwogICAgICAgICAgICAgIHJldHVybiBwYXJjZWxDb25maWdPYmplY3RHZXR0ZXJQcm9taXNlOwoKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBfY29udGV4dDUudDYgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgKDAsIF9jb250ZXh0NS50NikoY29udGFpbmVyKSk7CgogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpOwogIH07CgogIGlmICghc3RhcnRlZCkgewogICAgLy8gV2UgbmVlZCB0byBpbnZva2Ugc3RhcnQgbWV0aG9kIG9mIHNpbmdsZS1zcGEgYXMgdGhlIHBvcHN0YXRlIGV2ZW50IHNob3VsZCBiZSBkaXNwYXRjaGVkIHdoaWxlIHRoZSBtYWluIGFwcCBjYWxsaW5nIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGUgYXV0b21hdGljYWxseSwKICAgIC8vIGJ1dCBpbiBzaW5nbGUtc3BhIGl0IHdpbGwgY2hlY2sgdGhlIHN0YXJ0IHN0YXR1cyBiZWZvcmUgaXQgZGlzcGF0Y2ggcG9wc3RhdGUKICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vc2luZ2xlLXNwYS9zaW5nbGUtc3BhL2Jsb2IvZjI4YjU5NjNiZTE0ODQ1ODNhMDcyYzgxNDVhYzBiNWEyOGQ5MTIzNS9zcmMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLWV2ZW50cy5qcyNMMTAxCiAgICAvLyByZWYgaHR0cHM6Ly9naXRodWIuY29tL3VtaWpzL3FpYW5rdW4vcHVsbC8xMDcxCiAgICBzdGFydFNpbmdsZVNwYSh7CiAgICAgIHVybFJlcm91dGVPbmx5OiAoX2EgPSBmcmFtZXdvcmtDb25maWd1cmF0aW9uLnVybFJlcm91dGVPbmx5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBkZWZhdWx0VXJsUmVyb3V0ZU9ubHkKICAgIH0pOwogIH0KCiAgbWljcm9BcHAgPSBtb3VudFJvb3RQYXJjZWwobWVtb3JpemVkTG9hZGluZ0ZuLCBPYmplY3QuYXNzaWduKHsKICAgIGRvbUVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpCiAgfSwgcHJvcHMpKTsKCiAgaWYgKGNvbnRhaW5lcikgewogICAgaWYgKGNvbnRhaW5lclhQYXRoKSB7CiAgICAgIC8vIFN0b3JlIHRoZSBtaWNyb0FwcHMgd2hpY2ggdGhleSBtb3VudGVkIG9uIHRoZSBzYW1lIGNvbnRhaW5lcgogICAgICB2YXIgbWljcm9BcHBzUmVmID0gY29udGFpbmVyTWljcm9BcHBzTWFwLmdldChhcHBDb250YWluZXJYUGF0aEtleSkgfHwgW107CiAgICAgIG1pY3JvQXBwc1JlZi5wdXNoKG1pY3JvQXBwKTsKICAgICAgY29udGFpbmVyTWljcm9BcHBzTWFwLnNldChhcHBDb250YWluZXJYUGF0aEtleSwgbWljcm9BcHBzUmVmKTsKCiAgICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgICB2YXIgaW5kZXggPSBtaWNyb0FwcHNSZWYuaW5kZXhPZihtaWNyb0FwcCk7CiAgICAgICAgbWljcm9BcHBzUmVmLnNwbGljZShpbmRleCwgMSk7IC8vIEB0cy1pZ25vcmUKCiAgICAgICAgbWljcm9BcHAgPSBudWxsOwogICAgICB9OyAvLyBnYyBhZnRlciB1bm1vdW50CgoKICAgICAgbWljcm9BcHAudW5tb3VudFByb21pc2UudGhlbihjbGVhbnVwKS5jYXRjaChjbGVhbnVwKTsKICAgIH0KICB9CgogIHJldHVybiBtaWNyb0FwcDsKfQpleHBvcnQgZnVuY3Rpb24gc3RhcnQoKSB7CiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogIGZyYW1ld29ya0NvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHsKICAgIHByZWZldGNoOiB0cnVlLAogICAgc2luZ3VsYXI6IHRydWUsCiAgICBzYW5kYm94OiB0cnVlCiAgfSwgb3B0cyk7CgogIHZhciBfZnJhbWV3b3JrQ29uZmlndXJhdGkgPSBmcmFtZXdvcmtDb25maWd1cmF0aW9uLAogICAgICBwcmVmZXRjaCA9IF9mcmFtZXdvcmtDb25maWd1cmF0aS5wcmVmZXRjaCwKICAgICAgc2FuZGJveCA9IF9mcmFtZXdvcmtDb25maWd1cmF0aS5zYW5kYm94LAogICAgICBzaW5ndWxhciA9IF9mcmFtZXdvcmtDb25maWd1cmF0aS5zaW5ndWxhciwKICAgICAgX2ZyYW1ld29ya0NvbmZpZ3VyYXRpMiA9IF9mcmFtZXdvcmtDb25maWd1cmF0aS51cmxSZXJvdXRlT25seSwKICAgICAgdXJsUmVyb3V0ZU9ubHkgPSBfZnJhbWV3b3JrQ29uZmlndXJhdGkyID09PSB2b2lkIDAgPyBkZWZhdWx0VXJsUmVyb3V0ZU9ubHkgOiBfZnJhbWV3b3JrQ29uZmlndXJhdGkyLAogICAgICBpbXBvcnRFbnRyeU9wdHMgPSBfX3Jlc3QoZnJhbWV3b3JrQ29uZmlndXJhdGlvbiwgWyJwcmVmZXRjaCIsICJzYW5kYm94IiwgInNpbmd1bGFyIiwgInVybFJlcm91dGVPbmx5Il0pOwoKICBpZiAocHJlZmV0Y2gpIHsKICAgIGRvUHJlZmV0Y2hTdHJhdGVneShtaWNyb0FwcHMsIHByZWZldGNoLCBpbXBvcnRFbnRyeU9wdHMpOwogIH0KCiAgZnJhbWV3b3JrQ29uZmlndXJhdGlvbiA9IGF1dG9Eb3duZ3JhZGVGb3JMb3dWZXJzaW9uQnJvd3NlcihmcmFtZXdvcmtDb25maWd1cmF0aW9uKTsKICBzdGFydFNpbmdsZVNwYSh7CiAgICB1cmxSZXJvdXRlT25seTogdXJsUmVyb3V0ZU9ubHkKICB9KTsKICBzdGFydGVkID0gdHJ1ZTsKICBmcmFtZXdvcmtTdGFydGVkRGVmZXIucmVzb2x2ZSgpOwp9"},{"version":3,"sources":["D:/qiankun微前台/Demo/qiankun/qiankun-base/node_modules/qiankun/es/apis.js"],"names":["_regeneratorRuntime","_noop","_toConsumableArray","_typeof","__awaiter","__rest","mountRootParcel","registerApplication","start","startSingleSpa","loadApp","doPrefetchStrategy","Deferred","getContainerXPath","toArray","microApps","frameworkConfiguration","started","defaultUrlRerouteOnly","frameworkStartedDefer","autoDowngradeForLowVersionBrowser","configuration","sandbox","singular","window","Proxy","console","warn","Object","assign","loose","registerMicroApps","apps","lifeCycles","_this","unregisteredApps","filter","app","some","registeredApp","name","concat","forEach","activeRule","_app$loader","loader","props","appConfig","mark","_callee3","_this2","_a","mount","otherMicroAppConfigs","wrap","_callee3$","_context3","prev","next","promise","t0","sent","abrupt","_callee","_callee$","_context","stop","_callee2","_callee2$","_context2","activeWhen","customProps","appConfigPromiseGetterMap","Map","containerMicroAppsMap","loadMicroApp","_this3","container","undefined","containerXPath","appContainerXPathKey","microApp","wrapParcelConfigForRemount","config","microAppConfig","containerMicroApps","get","length","_callee4","prevLoadMicroApps","prevLoadMicroAppsWhichNotBroken","_callee4$","_context4","slice","indexOf","v","getStatus","Promise","all","map","unmountPromise","bootstrap","resolve","memorizedLoadingFn","_callee5","userConfiguration","$$cacheLifecycleByAppName","parcelConfigGetterPromise","_parcelConfigGetterPromise","parcelConfigObjectGetterPromise","_callee5$","_context5","t1","t2","t3","t4","t5","set","t6","urlRerouteOnly","domElement","document","createElement","microAppsRef","push","cleanup","index","splice","then","catch","opts","arguments","prefetch","_frameworkConfigurati","_frameworkConfigurati2","importEntryOpts"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _noop from \"lodash/noop\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { __awaiter, __rest } from \"tslib\";\nimport { mountRootParcel, registerApplication, start as startSingleSpa } from 'single-spa';\nimport { loadApp } from './loader';\nimport { doPrefetchStrategy } from './prefetch';\nimport { Deferred, getContainerXPath, toArray } from './utils';\nvar microApps = [];\nexport var frameworkConfiguration = {};\nvar started = false;\nvar defaultUrlRerouteOnly = true;\nvar frameworkStartedDefer = new Deferred();\n\nvar autoDowngradeForLowVersionBrowser = function autoDowngradeForLowVersionBrowser(configuration) {\n  var sandbox = configuration.sandbox,\n      singular = configuration.singular;\n\n  if (sandbox) {\n    if (!window.Proxy) {\n      console.warn('[qiankun] Miss window.Proxy, proxySandbox will degenerate into snapshotSandbox');\n\n      if (singular === false) {\n        console.warn('[qiankun] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy');\n      }\n\n      return Object.assign(Object.assign({}, configuration), {\n        sandbox: _typeof(sandbox) === 'object' ? Object.assign(Object.assign({}, sandbox), {\n          loose: true\n        }) : {\n          loose: true\n        }\n      });\n    }\n  }\n\n  return configuration;\n};\n\nexport function registerMicroApps(apps, lifeCycles) {\n  var _this = this;\n\n  // Each app only needs to be registered once\n  var unregisteredApps = apps.filter(function (app) {\n    return !microApps.some(function (registeredApp) {\n      return registeredApp.name === app.name;\n    });\n  });\n  microApps = [].concat(_toConsumableArray(microApps), _toConsumableArray(unregisteredApps));\n  unregisteredApps.forEach(function (app) {\n    var name = app.name,\n        activeRule = app.activeRule,\n        _app$loader = app.loader,\n        loader = _app$loader === void 0 ? _noop : _app$loader,\n        props = app.props,\n        appConfig = __rest(app, [\"name\", \"activeRule\", \"loader\", \"props\"]);\n\n    registerApplication({\n      name: name,\n      app: function app() {\n        return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var _this2 = this;\n\n          var _a, mount, otherMicroAppConfigs;\n\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  loader(true);\n                  _context3.next = 3;\n                  return frameworkStartedDefer.promise;\n\n                case 3:\n                  _context3.next = 5;\n                  return loadApp(Object.assign({\n                    name: name,\n                    props: props\n                  }, appConfig), frameworkConfiguration, lifeCycles);\n\n                case 5:\n                  _context3.t0 = _context3.sent;\n                  _a = (0, _context3.t0)();\n                  mount = _a.mount;\n                  otherMicroAppConfigs = __rest(_a, [\"mount\"]);\n                  return _context3.abrupt(\"return\", Object.assign({\n                    mount: [function () {\n                      return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                        return _regeneratorRuntime.wrap(function _callee$(_context) {\n                          while (1) {\n                            switch (_context.prev = _context.next) {\n                              case 0:\n                                return _context.abrupt(\"return\", loader(true));\n\n                              case 1:\n                              case \"end\":\n                                return _context.stop();\n                            }\n                          }\n                        }, _callee);\n                      }));\n                    }].concat(_toConsumableArray(toArray(mount)), [function () {\n                      return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                          while (1) {\n                            switch (_context2.prev = _context2.next) {\n                              case 0:\n                                return _context2.abrupt(\"return\", loader(false));\n\n                              case 1:\n                              case \"end\":\n                                return _context2.stop();\n                            }\n                          }\n                        }, _callee2);\n                      }));\n                    }])\n                  }, otherMicroAppConfigs));\n\n                case 10:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n      },\n      activeWhen: activeRule,\n      customProps: props\n    });\n  });\n}\nvar appConfigPromiseGetterMap = new Map();\nvar containerMicroAppsMap = new Map();\nexport function loadMicroApp(app, configuration, lifeCycles) {\n  var _this3 = this;\n\n  var _a;\n\n  var props = app.props,\n      name = app.name;\n  var container = 'container' in app ? app.container : undefined; // Must compute the container xpath at beginning to keep it consist around app running\n  // If we compute it every time, the container dom structure most probably been changed and result in a different xpath value\n\n  var containerXPath = getContainerXPath(container);\n  var appContainerXPathKey = \"\".concat(name, \"-\").concat(containerXPath);\n  var microApp;\n\n  var wrapParcelConfigForRemount = function wrapParcelConfigForRemount(config) {\n    var microAppConfig = config;\n\n    if (container) {\n      if (containerXPath) {\n        var containerMicroApps = containerMicroAppsMap.get(appContainerXPathKey);\n\n        if (containerMicroApps === null || containerMicroApps === void 0 ? void 0 : containerMicroApps.length) {\n          var mount = [function () {\n            return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n              var prevLoadMicroApps, prevLoadMicroAppsWhichNotBroken;\n              return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                  switch (_context4.prev = _context4.next) {\n                    case 0:\n                      // While there are multiple micro apps mounted on the same container, we must wait until the prev instances all had unmounted\n                      // Otherwise it will lead some concurrent issues\n                      prevLoadMicroApps = containerMicroApps.slice(0, containerMicroApps.indexOf(microApp));\n                      prevLoadMicroAppsWhichNotBroken = prevLoadMicroApps.filter(function (v) {\n                        return v.getStatus() !== 'LOAD_ERROR' && v.getStatus() !== 'SKIP_BECAUSE_BROKEN';\n                      });\n                      _context4.next = 4;\n                      return Promise.all(prevLoadMicroAppsWhichNotBroken.map(function (v) {\n                        return v.unmountPromise;\n                      }));\n\n                    case 4:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }\n              }, _callee4);\n            }));\n          }].concat(_toConsumableArray(toArray(microAppConfig.mount)));\n          microAppConfig = Object.assign(Object.assign({}, config), {\n            mount: mount\n          });\n        }\n      }\n    }\n\n    return Object.assign(Object.assign({}, microAppConfig), {\n      // empty bootstrap hook which should not run twice while it calling from cached micro app\n      bootstrap: function bootstrap() {\n        return Promise.resolve();\n      }\n    });\n  };\n  /**\n   * using name + container xpath as the micro app instance id,\n   * it means if you rendering a micro app to a dom which have been rendered before,\n   * the micro app would not load and evaluate its lifecycles again\n   */\n\n\n  var memorizedLoadingFn = function memorizedLoadingFn() {\n    return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var userConfiguration, $$cacheLifecycleByAppName, parcelConfigGetterPromise, _parcelConfigGetterPromise, parcelConfigObjectGetterPromise;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              userConfiguration = autoDowngradeForLowVersionBrowser(configuration !== null && configuration !== void 0 ? configuration : Object.assign(Object.assign({}, frameworkConfiguration), {\n                singular: false\n              }));\n              $$cacheLifecycleByAppName = userConfiguration.$$cacheLifecycleByAppName;\n\n              if (!container) {\n                _context5.next = 21;\n                break;\n              }\n\n              if (!$$cacheLifecycleByAppName) {\n                _context5.next = 12;\n                break;\n              }\n\n              parcelConfigGetterPromise = appConfigPromiseGetterMap.get(name);\n\n              if (!parcelConfigGetterPromise) {\n                _context5.next = 12;\n                break;\n              }\n\n              _context5.t0 = wrapParcelConfigForRemount;\n              _context5.next = 9;\n              return parcelConfigGetterPromise;\n\n            case 9:\n              _context5.t1 = _context5.sent;\n              _context5.t2 = (0, _context5.t1)(container);\n              return _context5.abrupt(\"return\", (0, _context5.t0)(_context5.t2));\n\n            case 12:\n              if (!containerXPath) {\n                _context5.next = 21;\n                break;\n              }\n\n              _parcelConfigGetterPromise = appConfigPromiseGetterMap.get(appContainerXPathKey);\n\n              if (!_parcelConfigGetterPromise) {\n                _context5.next = 21;\n                break;\n              }\n\n              _context5.t3 = wrapParcelConfigForRemount;\n              _context5.next = 18;\n              return _parcelConfigGetterPromise;\n\n            case 18:\n              _context5.t4 = _context5.sent;\n              _context5.t5 = (0, _context5.t4)(container);\n              return _context5.abrupt(\"return\", (0, _context5.t3)(_context5.t5));\n\n            case 21:\n              parcelConfigObjectGetterPromise = loadApp(app, userConfiguration, lifeCycles);\n\n              if (container) {\n                if ($$cacheLifecycleByAppName) {\n                  appConfigPromiseGetterMap.set(name, parcelConfigObjectGetterPromise);\n                } else if (containerXPath) appConfigPromiseGetterMap.set(appContainerXPathKey, parcelConfigObjectGetterPromise);\n              }\n\n              _context5.next = 25;\n              return parcelConfigObjectGetterPromise;\n\n            case 25:\n              _context5.t6 = _context5.sent;\n              return _context5.abrupt(\"return\", (0, _context5.t6)(container));\n\n            case 27:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n  };\n\n  if (!started) {\n    // We need to invoke start method of single-spa as the popstate event should be dispatched while the main app calling pushState/replaceState automatically,\n    // but in single-spa it will check the start status before it dispatch popstate\n    // see https://github.com/single-spa/single-spa/blob/f28b5963be1484583a072c8145ac0b5a28d91235/src/navigation/navigation-events.js#L101\n    // ref https://github.com/umijs/qiankun/pull/1071\n    startSingleSpa({\n      urlRerouteOnly: (_a = frameworkConfiguration.urlRerouteOnly) !== null && _a !== void 0 ? _a : defaultUrlRerouteOnly\n    });\n  }\n\n  microApp = mountRootParcel(memorizedLoadingFn, Object.assign({\n    domElement: document.createElement('div')\n  }, props));\n\n  if (container) {\n    if (containerXPath) {\n      // Store the microApps which they mounted on the same container\n      var microAppsRef = containerMicroAppsMap.get(appContainerXPathKey) || [];\n      microAppsRef.push(microApp);\n      containerMicroAppsMap.set(appContainerXPathKey, microAppsRef);\n\n      var cleanup = function cleanup() {\n        var index = microAppsRef.indexOf(microApp);\n        microAppsRef.splice(index, 1); // @ts-ignore\n\n        microApp = null;\n      }; // gc after unmount\n\n\n      microApp.unmountPromise.then(cleanup).catch(cleanup);\n    }\n  }\n\n  return microApp;\n}\nexport function start() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  frameworkConfiguration = Object.assign({\n    prefetch: true,\n    singular: true,\n    sandbox: true\n  }, opts);\n\n  var _frameworkConfigurati = frameworkConfiguration,\n      prefetch = _frameworkConfigurati.prefetch,\n      sandbox = _frameworkConfigurati.sandbox,\n      singular = _frameworkConfigurati.singular,\n      _frameworkConfigurati2 = _frameworkConfigurati.urlRerouteOnly,\n      urlRerouteOnly = _frameworkConfigurati2 === void 0 ? defaultUrlRerouteOnly : _frameworkConfigurati2,\n      importEntryOpts = __rest(frameworkConfiguration, [\"prefetch\", \"sandbox\", \"singular\", \"urlRerouteOnly\"]);\n\n  if (prefetch) {\n    doPrefetchStrategy(microApps, prefetch, importEntryOpts);\n  }\n\n  frameworkConfiguration = autoDowngradeForLowVersionBrowser(frameworkConfiguration);\n  startSingleSpa({\n    urlRerouteOnly: urlRerouteOnly\n  });\n  started = true;\n  frameworkStartedDefer.resolve();\n}"]}]}