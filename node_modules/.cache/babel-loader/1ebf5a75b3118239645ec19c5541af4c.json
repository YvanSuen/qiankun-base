{"remainingRequest":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js!D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\import-html-entry\\esm\\index.js","dependencies":[{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\import-html-entry\\esm\\index.js","mtime":499162500000},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618900774989},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js","mtime":1618886346176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKCi8qKgogKiBAYXV0aG9yIEt1aXRvcwogKiBAaG9tZXBhZ2UgaHR0cHM6Ly9naXRodWIuY29tL2t1aXRvcy8KICogQHNpbmNlIDIwMTgtMDgtMTUgMTE6MzcKICovCmltcG9ydCBwcm9jZXNzVHBsLCB7IGdlbkxpbmtSZXBsYWNlU3ltYm9sLCBnZW5TY3JpcHRSZXBsYWNlU3ltYm9sIH0gZnJvbSAnLi9wcm9jZXNzLXRwbCc7CmltcG9ydCB7IGRlZmF1bHRHZXRQdWJsaWNQYXRoLCBnZXRHbG9iYWxQcm9wLCBnZXRJbmxpbmVDb2RlLCBub3RlR2xvYmFsUHJvcHMsIHJlYWRSZXNBc1N0cmluZywgcmVxdWVzdElkbGVDYWxsYmFjayB9IGZyb20gJy4vdXRpbHMnOwp2YXIgc3R5bGVDYWNoZSA9IHt9Owp2YXIgc2NyaXB0Q2FjaGUgPSB7fTsKdmFyIGVtYmVkSFRNTENhY2hlID0ge307CgppZiAoIXdpbmRvdy5mZXRjaCkgewogIHRocm93IG5ldyBFcnJvcignW2ltcG9ydC1odG1sLWVudHJ5XSBIZXJlIGlzIG5vICJmZXRjaCIgb24gdGhlIHdpbmRvdyBlbnYsIHlvdSBuZWVkIHRvIHBvbHlmaWxsIGl0Jyk7Cn0KCnZhciBkZWZhdWx0RmV0Y2ggPSB3aW5kb3cuZmV0Y2guYmluZCh3aW5kb3cpOwoKZnVuY3Rpb24gZGVmYXVsdEdldFRlbXBsYXRlKHRwbCkgewogIHJldHVybiB0cGw7Cn0KLyoqCiAqIGNvbnZlcnQgZXh0ZXJuYWwgY3NzIGxpbmsgdG8gaW5saW5lIHN0eWxlIGZvciBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24KICogQHBhcmFtIHRlbXBsYXRlCiAqIEBwYXJhbSBzdHlsZXMKICogQHBhcmFtIG9wdHMKICogQHJldHVybiBlbWJlZEhUTUwKICovCgoKZnVuY3Rpb24gZ2V0RW1iZWRIVE1MKHRlbXBsYXRlLCBzdHlsZXMpIHsKICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIF9vcHRzJGZldGNoID0gb3B0cy5mZXRjaCwKICAgICAgZmV0Y2ggPSBfb3B0cyRmZXRjaCA9PT0gdm9pZCAwID8gZGVmYXVsdEZldGNoIDogX29wdHMkZmV0Y2g7CiAgdmFyIGVtYmVkSFRNTCA9IHRlbXBsYXRlOwogIHJldHVybiBfZ2V0RXh0ZXJuYWxTdHlsZVNoZWV0cyhzdHlsZXMsIGZldGNoKS50aGVuKGZ1bmN0aW9uIChzdHlsZVNoZWV0cykgewogICAgZW1iZWRIVE1MID0gc3R5bGVzLnJlZHVjZShmdW5jdGlvbiAoaHRtbCwgc3R5bGVTcmMsIGkpIHsKICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZShnZW5MaW5rUmVwbGFjZVN5bWJvbChzdHlsZVNyYyksICI8c3R5bGU+LyogIi5jb25jYXQoc3R5bGVTcmMsICIgKi8iKS5jb25jYXQoc3R5bGVTaGVldHNbaV0sICI8L3N0eWxlPiIpKTsKICAgICAgcmV0dXJuIGh0bWw7CiAgICB9LCBlbWJlZEhUTUwpOwogICAgcmV0dXJuIGVtYmVkSFRNTDsKICB9KTsKfQoKdmFyIGlzSW5saW5lQ29kZSA9IGZ1bmN0aW9uIGlzSW5saW5lQ29kZShjb2RlKSB7CiAgcmV0dXJuIGNvZGUuc3RhcnRzV2l0aCgnPCcpOwp9OwoKZnVuY3Rpb24gZ2V0RXhlY3V0YWJsZVNjcmlwdChzY3JpcHRTcmMsIHNjcmlwdFRleHQsIHByb3h5LCBzdHJpY3RHbG9iYWwpIHsKICB2YXIgc291cmNlVXJsID0gaXNJbmxpbmVDb2RlKHNjcmlwdFNyYykgPyAnJyA6ICIvLyMgc291cmNlVVJMPSIuY29uY2F0KHNjcmlwdFNyYywgIlxuIik7IC8vIOmAmui/h+i/meenjeaWueW8j+iOt+WPluWFqOWxgCB3aW5kb3fvvIzlm6DkuLogc2NyaXB0IOS5n+aYr+WcqOWFqOWxgOS9nOeUqOWfn+S4i+i/kOihjOeahO+8jOaJgOS7peaIkeS7rOmAmui/hyB3aW5kb3cucHJveHkg57uR5a6a5pe25Lmf5b+F6aG756Gu5L+d57uR5a6a5Yiw5YWo5bGAIHdpbmRvdyDkuIoKICAvLyDlkKbliJnlnKjltYzlpZflnLrmma/kuIvvvIwgd2luZG93LnByb3h5IOiuvue9rueahOaYr+WGheWxguW6lOeUqOeahCB3aW5kb3fvvIzogIzku6PnoIHlhbblrp7mmK/lnKjlhajlsYDkvZznlKjln5/ov5DooYznmoTvvIzkvJrlr7zoh7Tpl63ljIXph4znmoQgd2luZG93LnByb3h5IOWPlueahOaYr+acgOWkluWxgueahOW+ruW6lOeUqOeahCBwcm94eQoKICB2YXIgZ2xvYmFsV2luZG93ID0gKDAsIGV2YWwpKCd3aW5kb3cnKTsKICBnbG9iYWxXaW5kb3cucHJveHkgPSBwcm94eTsgLy8gVE9ETyDpgJrov4cgc3RyaWN0R2xvYmFsIOaWueW8j+WIh+aNouWIh+aNoiB3aXRoIOmXreWMhe+8jOW+hSB3aXRoIOaWueW8j+Wdkei2n+W5s+WQjuWGjeWQiOW5tgoKICByZXR1cm4gc3RyaWN0R2xvYmFsID8gIjsoZnVuY3Rpb24od2luZG93LCBzZWxmLCBnbG9iYWxUaGlzKXt3aXRoKHdpbmRvdyl7OyIuY29uY2F0KHNjcmlwdFRleHQsICJcbiIpLmNvbmNhdChzb3VyY2VVcmwsICJ9fSkuYmluZCh3aW5kb3cucHJveHkpKHdpbmRvdy5wcm94eSwgd2luZG93LnByb3h5LCB3aW5kb3cucHJveHkpOyIpIDogIjsoZnVuY3Rpb24od2luZG93LCBzZWxmLCBnbG9iYWxUaGlzKXs7Ii5jb25jYXQoc2NyaXB0VGV4dCwgIlxuIikuY29uY2F0KHNvdXJjZVVybCwgIn0pLmJpbmQod2luZG93LnByb3h5KSh3aW5kb3cucHJveHksIHdpbmRvdy5wcm94eSwgd2luZG93LnByb3h5KTsiKTsKfSAvLyBmb3IgcHJlZmV0Y2gKCgpmdW5jdGlvbiBfZ2V0RXh0ZXJuYWxTdHlsZVNoZWV0cyhzdHlsZXMpIHsKICB2YXIgZmV0Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGRlZmF1bHRGZXRjaDsKICByZXR1cm4gUHJvbWlzZS5hbGwoc3R5bGVzLm1hcChmdW5jdGlvbiAoc3R5bGVMaW5rKSB7CiAgICBpZiAoaXNJbmxpbmVDb2RlKHN0eWxlTGluaykpIHsKICAgICAgLy8gaWYgaXQgaXMgaW5saW5lIHN0eWxlCiAgICAgIHJldHVybiBnZXRJbmxpbmVDb2RlKHN0eWxlTGluayk7CiAgICB9IGVsc2UgewogICAgICAvLyBleHRlcm5hbCBzdHlsZXMKICAgICAgcmV0dXJuIHN0eWxlQ2FjaGVbc3R5bGVMaW5rXSB8fCAoc3R5bGVDYWNoZVtzdHlsZUxpbmtdID0gZmV0Y2goc3R5bGVMaW5rKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7CiAgICAgIH0pKTsKICAgIH0KICB9KSk7Cn0gLy8gZm9yIHByZWZldGNoCgoKZXhwb3J0IHsgX2dldEV4dGVybmFsU3R5bGVTaGVldHMgYXMgZ2V0RXh0ZXJuYWxTdHlsZVNoZWV0cyB9OwoKZnVuY3Rpb24gX2dldEV4dGVybmFsU2NyaXB0cyhzY3JpcHRzKSB7CiAgdmFyIGZldGNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0RmV0Y2g7CiAgdmFyIGVycm9yQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHt9OwoKICB2YXIgZmV0Y2hTY3JpcHQgPSBmdW5jdGlvbiBmZXRjaFNjcmlwdChzY3JpcHRVcmwpIHsKICAgIHJldHVybiBzY3JpcHRDYWNoZVtzY3JpcHRVcmxdIHx8IChzY3JpcHRDYWNoZVtzY3JpcHRVcmxdID0gZmV0Y2goc2NyaXB0VXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAvLyB1c3VhbGx5IGJyb3dzZXIgdHJlYXRzIDR4eCBhbmQgNXh4IHJlc3BvbnNlIG9mIHNjcmlwdCBsb2FkaW5nIGFzIGFuIGVycm9yIGFuZCB3aWxsIGZpcmUgYSBzY3JpcHQgZXJyb3IgZXZlbnQKICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTYyNTQyMC93aGF0LWh0dHAtaGVhZGVycy1yZXNwb25zZXMtdHJpZ2dlci10aGUtb25lcnJvci1oYW5kbGVyLW9uLWEtc2NyaXB0LXRhZy81NjI1NjAzCiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7CiAgICAgICAgZXJyb3JDYWxsYmFjaygpOwogICAgICAgIHRocm93IG5ldyBFcnJvcigiIi5jb25jYXQoc2NyaXB0VXJsLCAiIGxvYWQgZmFpbGVkIHdpdGggc3RhdHVzICIpLmNvbmNhdChyZXNwb25zZS5zdGF0dXMpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKICAgIH0pKTsKICB9OwoKICByZXR1cm4gUHJvbWlzZS5hbGwoc2NyaXB0cy5tYXAoZnVuY3Rpb24gKHNjcmlwdCkgewogICAgaWYgKHR5cGVvZiBzY3JpcHQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmIChpc0lubGluZUNvZGUoc2NyaXB0KSkgewogICAgICAgIC8vIGlmIGl0IGlzIGlubGluZSBzY3JpcHQKICAgICAgICByZXR1cm4gZ2V0SW5saW5lQ29kZShzY3JpcHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGV4dGVybmFsIHNjcmlwdAogICAgICAgIHJldHVybiBmZXRjaFNjcmlwdChzY3JpcHQpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyB1c2UgaWRsZSB0aW1lIHRvIGxvYWQgYXN5bmMgc2NyaXB0CiAgICAgIHZhciBzcmMgPSBzY3JpcHQuc3JjLAogICAgICAgICAgYXN5bmMgPSBzY3JpcHQuYXN5bmM7CgogICAgICBpZiAoYXN5bmMpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3JjOiBzcmMsCiAgICAgICAgICBhc3luYzogdHJ1ZSwKICAgICAgICAgIGNvbnRlbnQ6IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RJZGxlQ2FsbGJhY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmZXRjaFNjcmlwdChzcmMpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaFNjcmlwdChzcmMpOwogICAgfQogIH0pKTsKfQoKZXhwb3J0IHsgX2dldEV4dGVybmFsU2NyaXB0cyBhcyBnZXRFeHRlcm5hbFNjcmlwdHMgfTsKCmZ1bmN0aW9uIHRocm93Tm9uQmxvY2tpbmdFcnJvcihlcnJvciwgbXNnKSB7CiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBjb25zb2xlLmVycm9yKG1zZyk7CiAgICB0aHJvdyBlcnJvcjsKICB9KTsKfQoKdmFyIHN1cHBvcnRzVXNlclRpbWluZyA9IHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm1hcmsgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLmNsZWFyTWFya3MgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm1lYXN1cmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLmNsZWFyTWVhc3VyZXMgPT09ICdmdW5jdGlvbic7Ci8qKgogKiBGSVhNRSB0byBjb25zaXN0ZW50IHdpdGggYnJvd3NlciBiZWhhdmlvciwgd2Ugc2hvdWxkIG9ubHkgcHJvdmlkZSBjYWxsYmFjayB3YXkgdG8gaW52b2tlIHN1Y2Nlc3MgYW5kIGVycm9yIGV2ZW50CiAqIEBwYXJhbSBlbnRyeQogKiBAcGFyYW0gc2NyaXB0cwogKiBAcGFyYW0gcHJveHkKICogQHBhcmFtIG9wdHMKICogQHJldHVybnMge1Byb21pc2U8dW5rbm93bj59CiAqLwoKZnVuY3Rpb24gX2V4ZWNTY3JpcHRzKGVudHJ5LCBzY3JpcHRzKSB7CiAgdmFyIHByb3h5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB3aW5kb3c7CiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9OwogIHZhciBfb3B0cyRmZXRjaDIgPSBvcHRzLmZldGNoLAogICAgICBmZXRjaCA9IF9vcHRzJGZldGNoMiA9PT0gdm9pZCAwID8gZGVmYXVsdEZldGNoIDogX29wdHMkZmV0Y2gyLAogICAgICBfb3B0cyRzdHJpY3RHbG9iYWwgPSBvcHRzLnN0cmljdEdsb2JhbCwKICAgICAgc3RyaWN0R2xvYmFsID0gX29wdHMkc3RyaWN0R2xvYmFsID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRzJHN0cmljdEdsb2JhbCwKICAgICAgc3VjY2VzcyA9IG9wdHMuc3VjY2VzcywKICAgICAgX29wdHMkZXJyb3IgPSBvcHRzLmVycm9yLAogICAgICBlcnJvciA9IF9vcHRzJGVycm9yID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoKSB7fSA6IF9vcHRzJGVycm9yLAogICAgICBfb3B0cyRiZWZvcmVFeGVjID0gb3B0cy5iZWZvcmVFeGVjLAogICAgICBiZWZvcmVFeGVjID0gX29wdHMkYmVmb3JlRXhlYyA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkge30gOiBfb3B0cyRiZWZvcmVFeGVjLAogICAgICBfb3B0cyRhZnRlckV4ZWMgPSBvcHRzLmFmdGVyRXhlYywKICAgICAgYWZ0ZXJFeGVjID0gX29wdHMkYWZ0ZXJFeGVjID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoKSB7fSA6IF9vcHRzJGFmdGVyRXhlYzsKICByZXR1cm4gX2dldEV4dGVybmFsU2NyaXB0cyhzY3JpcHRzLCBmZXRjaCwgZXJyb3IpLnRoZW4oZnVuY3Rpb24gKHNjcmlwdHNUZXh0KSB7CiAgICB2YXIgZ2V2YWwgPSBmdW5jdGlvbiBnZXZhbChzY3JpcHRTcmMsIGlubGluZVNjcmlwdCkgewogICAgICB2YXIgcmF3Q29kZSA9IGJlZm9yZUV4ZWMoaW5saW5lU2NyaXB0LCBzY3JpcHRTcmMpIHx8IGlubGluZVNjcmlwdDsKICAgICAgdmFyIGNvZGUgPSBnZXRFeGVjdXRhYmxlU2NyaXB0KHNjcmlwdFNyYywgcmF3Q29kZSwgcHJveHksIHN0cmljdEdsb2JhbCk7CiAgICAgICgwLCBldmFsKShjb2RlKTsKICAgICAgYWZ0ZXJFeGVjKGlubGluZVNjcmlwdCwgc2NyaXB0U3JjKTsKICAgIH07CgogICAgZnVuY3Rpb24gZXhlYyhzY3JpcHRTcmMsIGlubGluZVNjcmlwdCwgcmVzb2x2ZSkgewogICAgICB2YXIgbWFya05hbWUgPSAiRXZhbHVhdGluZyBzY3JpcHQgIi5jb25jYXQoc2NyaXB0U3JjKTsKICAgICAgdmFyIG1lYXN1cmVOYW1lID0gIkV2YWx1YXRpbmcgVGltZSBDb25zdW1pbmc6ICIuY29uY2F0KHNjcmlwdFNyYyk7CgogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgc3VwcG9ydHNVc2VyVGltaW5nKSB7CiAgICAgICAgcGVyZm9ybWFuY2UubWFyayhtYXJrTmFtZSk7CiAgICAgIH0KCiAgICAgIGlmIChzY3JpcHRTcmMgPT09IGVudHJ5KSB7CiAgICAgICAgbm90ZUdsb2JhbFByb3BzKHN0cmljdEdsb2JhbCA/IHByb3h5IDogd2luZG93KTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIGJpbmQgd2luZG93LnByb3h5IHRvIGNoYW5nZSBgdGhpc2AgcmVmZXJlbmNlIGluIHNjcmlwdAogICAgICAgICAgZ2V2YWwoc2NyaXB0U3JjLCBpbmxpbmVTY3JpcHQpOwogICAgICAgICAgdmFyIGV4cG9ydHMgPSBwcm94eVtnZXRHbG9iYWxQcm9wKHN0cmljdEdsb2JhbCA/IHByb3h5IDogd2luZG93KV0gfHwge307CiAgICAgICAgICByZXNvbHZlKGV4cG9ydHMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8vIGVudHJ5IGVycm9yIG11c3QgYmUgdGhyb3duIHRvIG1ha2UgdGhlIHByb21pc2Ugc2V0dGxlZAogICAgICAgICAgY29uc29sZS5lcnJvcigiW2ltcG9ydC1odG1sLWVudHJ5XTogZXJyb3Igb2NjdXJzIHdoaWxlIGV4ZWN1dGluZyBlbnRyeSBzY3JpcHQgIi5jb25jYXQoc2NyaXB0U3JjKSk7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHlwZW9mIGlubGluZVNjcmlwdCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGJpbmQgd2luZG93LnByb3h5IHRvIGNoYW5nZSBgdGhpc2AgcmVmZXJlbmNlIGluIHNjcmlwdAogICAgICAgICAgICBnZXZhbChzY3JpcHRTcmMsIGlubGluZVNjcmlwdCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIGNvbnNpc3RlbnQgd2l0aCBicm93c2VyIGJlaGF2aW9yLCBhbnkgaW5kZXBlbmRlbnQgc2NyaXB0IGV2YWx1YXRpb24gZXJyb3Igc2hvdWxkIG5vdCBibG9jayB0aGUgb3RoZXJzCiAgICAgICAgICAgIHRocm93Tm9uQmxvY2tpbmdFcnJvcihlLCAiW2ltcG9ydC1odG1sLWVudHJ5XTogZXJyb3Igb2NjdXJzIHdoaWxlIGV4ZWN1dGluZyBub3JtYWwgc2NyaXB0ICIuY29uY2F0KHNjcmlwdFNyYykpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBleHRlcm5hbCBzY3JpcHQgbWFya2VkIHdpdGggYXN5bmMKICAgICAgICAgIGlubGluZVNjcmlwdC5hc3luYyAmJiAoaW5saW5lU2NyaXB0ID09PSBudWxsIHx8IGlubGluZVNjcmlwdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5saW5lU2NyaXB0LmNvbnRlbnQudGhlbihmdW5jdGlvbiAoZG93bmxvYWRlZFNjcmlwdFRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIGdldmFsKGlubGluZVNjcmlwdC5zcmMsIGRvd25sb2FkZWRTY3JpcHRUZXh0KTsKICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHRocm93Tm9uQmxvY2tpbmdFcnJvcihlLCAiW2ltcG9ydC1odG1sLWVudHJ5XTogZXJyb3Igb2NjdXJzIHdoaWxlIGV4ZWN1dGluZyBhc3luYyBzY3JpcHQgIi5jb25jYXQoaW5saW5lU2NyaXB0LnNyYykpOwogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHN1cHBvcnRzVXNlclRpbWluZykgewogICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUobWVhc3VyZU5hbWUsIG1hcmtOYW1lKTsKICAgICAgICBwZXJmb3JtYW5jZS5jbGVhck1hcmtzKG1hcmtOYW1lKTsKICAgICAgICBwZXJmb3JtYW5jZS5jbGVhck1lYXN1cmVzKG1lYXN1cmVOYW1lKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNjaGVkdWxlKGksIHJlc29sdmVQcm9taXNlKSB7CiAgICAgIGlmIChpIDwgc2NyaXB0cy5sZW5ndGgpIHsKICAgICAgICB2YXIgc2NyaXB0U3JjID0gc2NyaXB0c1tpXTsKICAgICAgICB2YXIgaW5saW5lU2NyaXB0ID0gc2NyaXB0c1RleHRbaV07CiAgICAgICAgZXhlYyhzY3JpcHRTcmMsIGlubGluZVNjcmlwdCwgcmVzb2x2ZVByb21pc2UpOyAvLyByZXNvbHZlIHRoZSBwcm9taXNlIHdoaWxlIHRoZSBsYXN0IHNjcmlwdCBleGVjdXRlZCBhbmQgZW50cnkgbm90IHByb3ZpZGVkCgogICAgICAgIGlmICghZW50cnkgJiYgaSA9PT0gc2NyaXB0cy5sZW5ndGggLSAxKSB7CiAgICAgICAgICByZXNvbHZlUHJvbWlzZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzY2hlZHVsZShpICsgMSwgcmVzb2x2ZVByb21pc2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXR1cm4gc2NoZWR1bGUoMCwgc3VjY2VzcyB8fCByZXNvbHZlKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgeyBfZXhlY1NjcmlwdHMgYXMgZXhlY1NjcmlwdHMgfTsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1wb3J0SFRNTCh1cmwpIHsKICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgdmFyIGZldGNoID0gZGVmYXVsdEZldGNoOwogIHZhciBhdXRvRGVjb2RlUmVzcG9uc2UgPSBmYWxzZTsKICB2YXIgZ2V0UHVibGljUGF0aCA9IGRlZmF1bHRHZXRQdWJsaWNQYXRoOwogIHZhciBnZXRUZW1wbGF0ZSA9IGRlZmF1bHRHZXRUZW1wbGF0ZTsgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBsZWdhY3kgaW1wb3J0SFRNTCBhcGkKCiAgaWYgKHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSB7CiAgICBmZXRjaCA9IG9wdHM7CiAgfSBlbHNlIHsKICAgIC8vIGZldGNoIG9wdGlvbiBpcyBhdmFpbGJsZQogICAgaWYgKG9wdHMuZmV0Y2gpIHsKICAgICAgLy8gZmV0Y2ggaXMgYSBmdW5jaXRvbgogICAgICBpZiAodHlwZW9mIG9wdHMuZmV0Y2ggPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBmZXRjaCA9IG9wdHMuZmV0Y2g7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gY29uZmlndXJhdGlvbgogICAgICAgIGZldGNoID0gb3B0cy5mZXRjaC5mbiB8fCBkZWZhdWx0RmV0Y2g7CiAgICAgICAgYXV0b0RlY29kZVJlc3BvbnNlID0gISFvcHRzLmZldGNoLmF1dG9EZWNvZGVSZXNwb25zZTsKICAgICAgfQogICAgfQoKICAgIGdldFB1YmxpY1BhdGggPSBvcHRzLmdldFB1YmxpY1BhdGggfHwgb3B0cy5nZXREb21haW4gfHwgZGVmYXVsdEdldFB1YmxpY1BhdGg7CiAgICBnZXRUZW1wbGF0ZSA9IG9wdHMuZ2V0VGVtcGxhdGUgfHwgZGVmYXVsdEdldFRlbXBsYXRlOwogIH0KCiAgcmV0dXJuIGVtYmVkSFRNTENhY2hlW3VybF0gfHwgKGVtYmVkSFRNTENhY2hlW3VybF0gPSBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICByZXR1cm4gcmVhZFJlc0FzU3RyaW5nKHJlc3BvbnNlLCBhdXRvRGVjb2RlUmVzcG9uc2UpOwogIH0pLnRoZW4oZnVuY3Rpb24gKGh0bWwpIHsKICAgIHZhciBhc3NldFB1YmxpY1BhdGggPSBnZXRQdWJsaWNQYXRoKHVybCk7CgogICAgdmFyIF9wcm9jZXNzVHBsID0gcHJvY2Vzc1RwbChnZXRUZW1wbGF0ZShodG1sKSwgYXNzZXRQdWJsaWNQYXRoKSwKICAgICAgICB0ZW1wbGF0ZSA9IF9wcm9jZXNzVHBsLnRlbXBsYXRlLAogICAgICAgIHNjcmlwdHMgPSBfcHJvY2Vzc1RwbC5zY3JpcHRzLAogICAgICAgIGVudHJ5ID0gX3Byb2Nlc3NUcGwuZW50cnksCiAgICAgICAgc3R5bGVzID0gX3Byb2Nlc3NUcGwuc3R5bGVzOwoKICAgIHJldHVybiBnZXRFbWJlZEhUTUwodGVtcGxhdGUsIHN0eWxlcywgewogICAgICBmZXRjaDogZmV0Y2gKICAgIH0pLnRoZW4oZnVuY3Rpb24gKGVtYmVkSFRNTCkgewogICAgICByZXR1cm4gewogICAgICAgIHRlbXBsYXRlOiBlbWJlZEhUTUwsCiAgICAgICAgYXNzZXRQdWJsaWNQYXRoOiBhc3NldFB1YmxpY1BhdGgsCiAgICAgICAgZ2V0RXh0ZXJuYWxTY3JpcHRzOiBmdW5jdGlvbiBnZXRFeHRlcm5hbFNjcmlwdHMoKSB7CiAgICAgICAgICByZXR1cm4gX2dldEV4dGVybmFsU2NyaXB0cyhzY3JpcHRzLCBmZXRjaCk7CiAgICAgICAgfSwKICAgICAgICBnZXRFeHRlcm5hbFN0eWxlU2hlZXRzOiBmdW5jdGlvbiBnZXRFeHRlcm5hbFN0eWxlU2hlZXRzKCkgewogICAgICAgICAgcmV0dXJuIF9nZXRFeHRlcm5hbFN0eWxlU2hlZXRzKHN0eWxlcywgZmV0Y2gpOwogICAgICAgIH0sCiAgICAgICAgZXhlY1NjcmlwdHM6IGZ1bmN0aW9uIGV4ZWNTY3JpcHRzKHByb3h5LCBzdHJpY3RHbG9iYWwpIHsKICAgICAgICAgIHZhciBleGVjU2NyaXB0c0hvb2tzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKCiAgICAgICAgICBpZiAoIXNjcmlwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX2V4ZWNTY3JpcHRzKGVudHJ5LCBzY3JpcHRzLCBwcm94eSwgewogICAgICAgICAgICBmZXRjaDogZmV0Y2gsCiAgICAgICAgICAgIHN0cmljdEdsb2JhbDogc3RyaWN0R2xvYmFsLAogICAgICAgICAgICBiZWZvcmVFeGVjOiBleGVjU2NyaXB0c0hvb2tzLmJlZm9yZUV4ZWMsCiAgICAgICAgICAgIGFmdGVyRXhlYzogZXhlY1NjcmlwdHNIb29rcy5hZnRlckV4ZWMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0pKTsKfQpleHBvcnQgZnVuY3Rpb24gaW1wb3J0RW50cnkoZW50cnkpIHsKICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgdmFyIF9vcHRzJGZldGNoMyA9IG9wdHMuZmV0Y2gsCiAgICAgIGZldGNoID0gX29wdHMkZmV0Y2gzID09PSB2b2lkIDAgPyBkZWZhdWx0RmV0Y2ggOiBfb3B0cyRmZXRjaDMsCiAgICAgIF9vcHRzJGdldFRlbXBsYXRlID0gb3B0cy5nZXRUZW1wbGF0ZSwKICAgICAgZ2V0VGVtcGxhdGUgPSBfb3B0cyRnZXRUZW1wbGF0ZSA9PT0gdm9pZCAwID8gZGVmYXVsdEdldFRlbXBsYXRlIDogX29wdHMkZ2V0VGVtcGxhdGU7CiAgdmFyIGdldFB1YmxpY1BhdGggPSBvcHRzLmdldFB1YmxpY1BhdGggfHwgb3B0cy5nZXREb21haW4gfHwgZGVmYXVsdEdldFB1YmxpY1BhdGg7CgogIGlmICghZW50cnkpIHsKICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignZW50cnkgc2hvdWxkIG5vdCBiZSBlbXB0eSEnKTsKICB9IC8vIGh0bWwgZW50cnkKCgogIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gaW1wb3J0SFRNTChlbnRyeSwgewogICAgICBmZXRjaDogZmV0Y2gsCiAgICAgIGdldFB1YmxpY1BhdGg6IGdldFB1YmxpY1BhdGgsCiAgICAgIGdldFRlbXBsYXRlOiBnZXRUZW1wbGF0ZQogICAgfSk7CiAgfSAvLyBjb25maWcgZW50cnkKCgogIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LnNjcmlwdHMpIHx8IEFycmF5LmlzQXJyYXkoZW50cnkuc3R5bGVzKSkgewogICAgdmFyIF9lbnRyeSRzY3JpcHRzID0gZW50cnkuc2NyaXB0cywKICAgICAgICBzY3JpcHRzID0gX2VudHJ5JHNjcmlwdHMgPT09IHZvaWQgMCA/IFtdIDogX2VudHJ5JHNjcmlwdHMsCiAgICAgICAgX2VudHJ5JHN0eWxlcyA9IGVudHJ5LnN0eWxlcywKICAgICAgICBzdHlsZXMgPSBfZW50cnkkc3R5bGVzID09PSB2b2lkIDAgPyBbXSA6IF9lbnRyeSRzdHlsZXMsCiAgICAgICAgX2VudHJ5JGh0bWwgPSBlbnRyeS5odG1sLAogICAgICAgIGh0bWwgPSBfZW50cnkkaHRtbCA9PT0gdm9pZCAwID8gJycgOiBfZW50cnkkaHRtbDsKCiAgICB2YXIgc2V0U3R5bGVQbGFjZWhvbGRlcjJIVE1MID0gZnVuY3Rpb24gc2V0U3R5bGVQbGFjZWhvbGRlcjJIVE1MKHRwbCkgewogICAgICByZXR1cm4gc3R5bGVzLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChodG1sLCBzdHlsZVNyYykgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoZ2VuTGlua1JlcGxhY2VTeW1ib2woc3R5bGVTcmMpKS5jb25jYXQoaHRtbCk7CiAgICAgIH0sIHRwbCk7CiAgICB9OwoKICAgIHZhciBzZXRTY3JpcHRQbGFjZWhvbGRlcjJIVE1MID0gZnVuY3Rpb24gc2V0U2NyaXB0UGxhY2Vob2xkZXIySFRNTCh0cGwpIHsKICAgICAgcmV0dXJuIHNjcmlwdHMucmVkdWNlKGZ1bmN0aW9uIChodG1sLCBzY3JpcHRTcmMpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KGh0bWwpLmNvbmNhdChnZW5TY3JpcHRSZXBsYWNlU3ltYm9sKHNjcmlwdFNyYykpOwogICAgICB9LCB0cGwpOwogICAgfTsKCiAgICByZXR1cm4gZ2V0RW1iZWRIVE1MKGdldFRlbXBsYXRlKHNldFNjcmlwdFBsYWNlaG9sZGVyMkhUTUwoc2V0U3R5bGVQbGFjZWhvbGRlcjJIVE1MKGh0bWwpKSksIHN0eWxlcywgewogICAgICBmZXRjaDogZmV0Y2gKICAgIH0pLnRoZW4oZnVuY3Rpb24gKGVtYmVkSFRNTCkgewogICAgICByZXR1cm4gewogICAgICAgIHRlbXBsYXRlOiBlbWJlZEhUTUwsCiAgICAgICAgYXNzZXRQdWJsaWNQYXRoOiBnZXRQdWJsaWNQYXRoKGVudHJ5KSwKICAgICAgICBnZXRFeHRlcm5hbFNjcmlwdHM6IGZ1bmN0aW9uIGdldEV4dGVybmFsU2NyaXB0cygpIHsKICAgICAgICAgIHJldHVybiBfZ2V0RXh0ZXJuYWxTY3JpcHRzKHNjcmlwdHMsIGZldGNoKTsKICAgICAgICB9LAogICAgICAgIGdldEV4dGVybmFsU3R5bGVTaGVldHM6IGZ1bmN0aW9uIGdldEV4dGVybmFsU3R5bGVTaGVldHMoKSB7CiAgICAgICAgICByZXR1cm4gX2dldEV4dGVybmFsU3R5bGVTaGVldHMoc3R5bGVzLCBmZXRjaCk7CiAgICAgICAgfSwKICAgICAgICBleGVjU2NyaXB0czogZnVuY3Rpb24gZXhlY1NjcmlwdHMocHJveHksIHN0cmljdEdsb2JhbCkgewogICAgICAgICAgdmFyIGV4ZWNTY3JpcHRzSG9va3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwoKICAgICAgICAgIGlmICghc2NyaXB0cy5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfZXhlY1NjcmlwdHMoc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLCBzY3JpcHRzLCBwcm94eSwgewogICAgICAgICAgICBmZXRjaDogZmV0Y2gsCiAgICAgICAgICAgIHN0cmljdEdsb2JhbDogc3RyaWN0R2xvYmFsLAogICAgICAgICAgICBiZWZvcmVFeGVjOiBleGVjU2NyaXB0c0hvb2tzLmJlZm9yZUV4ZWMsCiAgICAgICAgICAgIGFmdGVyRXhlYzogZXhlY1NjcmlwdHNIb29rcy5hZnRlckV4ZWMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ2VudHJ5IHNjcmlwdHMgb3Igc3R5bGVzIHNob3VsZCBiZSBhcnJheSEnKTsKICB9Cn0="},{"version":3,"sources":["D:/qiankun微前台/Demo/qiankun/qiankun-base/node_modules/import-html-entry/esm/index.js"],"names":["processTpl","genLinkReplaceSymbol","genScriptReplaceSymbol","defaultGetPublicPath","getGlobalProp","getInlineCode","noteGlobalProps","readResAsString","requestIdleCallback","styleCache","scriptCache","embedHTMLCache","window","fetch","Error","defaultFetch","bind","defaultGetTemplate","tpl","getEmbedHTML","template","styles","opts","arguments","length","undefined","_opts$fetch","embedHTML","_getExternalStyleSheets","then","styleSheets","reduce","html","styleSrc","i","replace","concat","isInlineCode","code","startsWith","getExecutableScript","scriptSrc","scriptText","proxy","strictGlobal","sourceUrl","globalWindow","eval","Promise","all","map","styleLink","response","text","getExternalStyleSheets","_getExternalScripts","scripts","errorCallback","fetchScript","scriptUrl","status","script","src","async","content","resolve","reject","getExternalScripts","throwNonBlockingError","error","msg","setTimeout","console","supportsUserTiming","performance","mark","clearMarks","measure","clearMeasures","_execScripts","entry","_opts$fetch2","_opts$strictGlobal","success","_opts$error","_opts$beforeExec","beforeExec","_opts$afterExec","afterExec","scriptsText","geval","inlineScript","rawCode","exec","markName","measureName","process","env","NODE_ENV","exports","e","downloadedScriptText","schedule","resolvePromise","execScripts","importHTML","url","autoDecodeResponse","getPublicPath","getTemplate","fn","getDomain","assetPublicPath","_processTpl","execScriptsHooks","importEntry","_opts$fetch3","_opts$getTemplate","SyntaxError","Array","isArray","_entry$scripts","_entry$styles","_entry$html","setStylePlaceholder2HTML","reduceRight","setScriptPlaceholder2HTML"],"mappings":"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","sourcesContent":["/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2018-08-15 11:37\n */\nimport processTpl, { genLinkReplaceSymbol, genScriptReplaceSymbol } from './process-tpl';\nimport { defaultGetPublicPath, getGlobalProp, getInlineCode, noteGlobalProps, readResAsString, requestIdleCallback } from './utils';\nvar styleCache = {};\nvar scriptCache = {};\nvar embedHTMLCache = {};\n\nif (!window.fetch) {\n  throw new Error('[import-html-entry] Here is no \"fetch\" on the window env, you need to polyfill it');\n}\n\nvar defaultFetch = window.fetch.bind(window);\n\nfunction defaultGetTemplate(tpl) {\n  return tpl;\n}\n/**\n * convert external css link to inline style for performance optimization\n * @param template\n * @param styles\n * @param opts\n * @return embedHTML\n */\n\n\nfunction getEmbedHTML(template, styles) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _opts$fetch = opts.fetch,\n      fetch = _opts$fetch === void 0 ? defaultFetch : _opts$fetch;\n  var embedHTML = template;\n  return _getExternalStyleSheets(styles, fetch).then(function (styleSheets) {\n    embedHTML = styles.reduce(function (html, styleSrc, i) {\n      html = html.replace(genLinkReplaceSymbol(styleSrc), \"<style>/* \".concat(styleSrc, \" */\").concat(styleSheets[i], \"</style>\"));\n      return html;\n    }, embedHTML);\n    return embedHTML;\n  });\n}\n\nvar isInlineCode = function isInlineCode(code) {\n  return code.startsWith('<');\n};\n\nfunction getExecutableScript(scriptSrc, scriptText, proxy, strictGlobal) {\n  var sourceUrl = isInlineCode(scriptSrc) ? '' : \"//# sourceURL=\".concat(scriptSrc, \"\\n\"); // 通过这种方式获取全局 window，因为 script 也是在全局作用域下运行的，所以我们通过 window.proxy 绑定时也必须确保绑定到全局 window 上\n  // 否则在嵌套场景下， window.proxy 设置的是内层应用的 window，而代码其实是在全局作用域运行的，会导致闭包里的 window.proxy 取的是最外层的微应用的 proxy\n\n  var globalWindow = (0, eval)('window');\n  globalWindow.proxy = proxy; // TODO 通过 strictGlobal 方式切换切换 with 闭包，待 with 方式坑趟平后再合并\n\n  return strictGlobal ? \";(function(window, self, globalThis){with(window){;\".concat(scriptText, \"\\n\").concat(sourceUrl, \"}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);\") : \";(function(window, self, globalThis){;\".concat(scriptText, \"\\n\").concat(sourceUrl, \"}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);\");\n} // for prefetch\n\n\nfunction _getExternalStyleSheets(styles) {\n  var fetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultFetch;\n  return Promise.all(styles.map(function (styleLink) {\n    if (isInlineCode(styleLink)) {\n      // if it is inline style\n      return getInlineCode(styleLink);\n    } else {\n      // external styles\n      return styleCache[styleLink] || (styleCache[styleLink] = fetch(styleLink).then(function (response) {\n        return response.text();\n      }));\n    }\n  }));\n} // for prefetch\n\n\nexport { _getExternalStyleSheets as getExternalStyleSheets };\n\nfunction _getExternalScripts(scripts) {\n  var fetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultFetch;\n  var errorCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n  var fetchScript = function fetchScript(scriptUrl) {\n    return scriptCache[scriptUrl] || (scriptCache[scriptUrl] = fetch(scriptUrl).then(function (response) {\n      // usually browser treats 4xx and 5xx response of script loading as an error and will fire a script error event\n      // https://stackoverflow.com/questions/5625420/what-http-headers-responses-trigger-the-onerror-handler-on-a-script-tag/5625603\n      if (response.status >= 400) {\n        errorCallback();\n        throw new Error(\"\".concat(scriptUrl, \" load failed with status \").concat(response.status));\n      }\n\n      return response.text();\n    }));\n  };\n\n  return Promise.all(scripts.map(function (script) {\n    if (typeof script === 'string') {\n      if (isInlineCode(script)) {\n        // if it is inline script\n        return getInlineCode(script);\n      } else {\n        // external script\n        return fetchScript(script);\n      }\n    } else {\n      // use idle time to load async script\n      var src = script.src,\n          async = script.async;\n\n      if (async) {\n        return {\n          src: src,\n          async: true,\n          content: new Promise(function (resolve, reject) {\n            return requestIdleCallback(function () {\n              return fetchScript(src).then(resolve, reject);\n            });\n          })\n        };\n      }\n\n      return fetchScript(src);\n    }\n  }));\n}\n\nexport { _getExternalScripts as getExternalScripts };\n\nfunction throwNonBlockingError(error, msg) {\n  setTimeout(function () {\n    console.error(msg);\n    throw error;\n  });\n}\n\nvar supportsUserTiming = typeof performance !== 'undefined' && typeof performance.mark === 'function' && typeof performance.clearMarks === 'function' && typeof performance.measure === 'function' && typeof performance.clearMeasures === 'function';\n/**\n * FIXME to consistent with browser behavior, we should only provide callback way to invoke success and error event\n * @param entry\n * @param scripts\n * @param proxy\n * @param opts\n * @returns {Promise<unknown>}\n */\n\nfunction _execScripts(entry, scripts) {\n  var proxy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _opts$fetch2 = opts.fetch,\n      fetch = _opts$fetch2 === void 0 ? defaultFetch : _opts$fetch2,\n      _opts$strictGlobal = opts.strictGlobal,\n      strictGlobal = _opts$strictGlobal === void 0 ? false : _opts$strictGlobal,\n      success = opts.success,\n      _opts$error = opts.error,\n      error = _opts$error === void 0 ? function () {} : _opts$error,\n      _opts$beforeExec = opts.beforeExec,\n      beforeExec = _opts$beforeExec === void 0 ? function () {} : _opts$beforeExec,\n      _opts$afterExec = opts.afterExec,\n      afterExec = _opts$afterExec === void 0 ? function () {} : _opts$afterExec;\n  return _getExternalScripts(scripts, fetch, error).then(function (scriptsText) {\n    var geval = function geval(scriptSrc, inlineScript) {\n      var rawCode = beforeExec(inlineScript, scriptSrc) || inlineScript;\n      var code = getExecutableScript(scriptSrc, rawCode, proxy, strictGlobal);\n      (0, eval)(code);\n      afterExec(inlineScript, scriptSrc);\n    };\n\n    function exec(scriptSrc, inlineScript, resolve) {\n      var markName = \"Evaluating script \".concat(scriptSrc);\n      var measureName = \"Evaluating Time Consuming: \".concat(scriptSrc);\n\n      if (process.env.NODE_ENV === 'development' && supportsUserTiming) {\n        performance.mark(markName);\n      }\n\n      if (scriptSrc === entry) {\n        noteGlobalProps(strictGlobal ? proxy : window);\n\n        try {\n          // bind window.proxy to change `this` reference in script\n          geval(scriptSrc, inlineScript);\n          var exports = proxy[getGlobalProp(strictGlobal ? proxy : window)] || {};\n          resolve(exports);\n        } catch (e) {\n          // entry error must be thrown to make the promise settled\n          console.error(\"[import-html-entry]: error occurs while executing entry script \".concat(scriptSrc));\n          throw e;\n        }\n      } else {\n        if (typeof inlineScript === 'string') {\n          try {\n            // bind window.proxy to change `this` reference in script\n            geval(scriptSrc, inlineScript);\n          } catch (e) {\n            // consistent with browser behavior, any independent script evaluation error should not block the others\n            throwNonBlockingError(e, \"[import-html-entry]: error occurs while executing normal script \".concat(scriptSrc));\n          }\n        } else {\n          // external script marked with async\n          inlineScript.async && (inlineScript === null || inlineScript === void 0 ? void 0 : inlineScript.content.then(function (downloadedScriptText) {\n            return geval(inlineScript.src, downloadedScriptText);\n          })[\"catch\"](function (e) {\n            throwNonBlockingError(e, \"[import-html-entry]: error occurs while executing async script \".concat(inlineScript.src));\n          }));\n        }\n      }\n\n      if (process.env.NODE_ENV === 'development' && supportsUserTiming) {\n        performance.measure(measureName, markName);\n        performance.clearMarks(markName);\n        performance.clearMeasures(measureName);\n      }\n    }\n\n    function schedule(i, resolvePromise) {\n      if (i < scripts.length) {\n        var scriptSrc = scripts[i];\n        var inlineScript = scriptsText[i];\n        exec(scriptSrc, inlineScript, resolvePromise); // resolve the promise while the last script executed and entry not provided\n\n        if (!entry && i === scripts.length - 1) {\n          resolvePromise();\n        } else {\n          schedule(i + 1, resolvePromise);\n        }\n      }\n    }\n\n    return new Promise(function (resolve) {\n      return schedule(0, success || resolve);\n    });\n  });\n}\n\nexport { _execScripts as execScripts };\nexport default function importHTML(url) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var fetch = defaultFetch;\n  var autoDecodeResponse = false;\n  var getPublicPath = defaultGetPublicPath;\n  var getTemplate = defaultGetTemplate; // compatible with the legacy importHTML api\n\n  if (typeof opts === 'function') {\n    fetch = opts;\n  } else {\n    // fetch option is availble\n    if (opts.fetch) {\n      // fetch is a funciton\n      if (typeof opts.fetch === 'function') {\n        fetch = opts.fetch;\n      } else {\n        // configuration\n        fetch = opts.fetch.fn || defaultFetch;\n        autoDecodeResponse = !!opts.fetch.autoDecodeResponse;\n      }\n    }\n\n    getPublicPath = opts.getPublicPath || opts.getDomain || defaultGetPublicPath;\n    getTemplate = opts.getTemplate || defaultGetTemplate;\n  }\n\n  return embedHTMLCache[url] || (embedHTMLCache[url] = fetch(url).then(function (response) {\n    return readResAsString(response, autoDecodeResponse);\n  }).then(function (html) {\n    var assetPublicPath = getPublicPath(url);\n\n    var _processTpl = processTpl(getTemplate(html), assetPublicPath),\n        template = _processTpl.template,\n        scripts = _processTpl.scripts,\n        entry = _processTpl.entry,\n        styles = _processTpl.styles;\n\n    return getEmbedHTML(template, styles, {\n      fetch: fetch\n    }).then(function (embedHTML) {\n      return {\n        template: embedHTML,\n        assetPublicPath: assetPublicPath,\n        getExternalScripts: function getExternalScripts() {\n          return _getExternalScripts(scripts, fetch);\n        },\n        getExternalStyleSheets: function getExternalStyleSheets() {\n          return _getExternalStyleSheets(styles, fetch);\n        },\n        execScripts: function execScripts(proxy, strictGlobal) {\n          var execScriptsHooks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          if (!scripts.length) {\n            return Promise.resolve();\n          }\n\n          return _execScripts(entry, scripts, proxy, {\n            fetch: fetch,\n            strictGlobal: strictGlobal,\n            beforeExec: execScriptsHooks.beforeExec,\n            afterExec: execScriptsHooks.afterExec\n          });\n        }\n      };\n    });\n  }));\n}\nexport function importEntry(entry) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _opts$fetch3 = opts.fetch,\n      fetch = _opts$fetch3 === void 0 ? defaultFetch : _opts$fetch3,\n      _opts$getTemplate = opts.getTemplate,\n      getTemplate = _opts$getTemplate === void 0 ? defaultGetTemplate : _opts$getTemplate;\n  var getPublicPath = opts.getPublicPath || opts.getDomain || defaultGetPublicPath;\n\n  if (!entry) {\n    throw new SyntaxError('entry should not be empty!');\n  } // html entry\n\n\n  if (typeof entry === 'string') {\n    return importHTML(entry, {\n      fetch: fetch,\n      getPublicPath: getPublicPath,\n      getTemplate: getTemplate\n    });\n  } // config entry\n\n\n  if (Array.isArray(entry.scripts) || Array.isArray(entry.styles)) {\n    var _entry$scripts = entry.scripts,\n        scripts = _entry$scripts === void 0 ? [] : _entry$scripts,\n        _entry$styles = entry.styles,\n        styles = _entry$styles === void 0 ? [] : _entry$styles,\n        _entry$html = entry.html,\n        html = _entry$html === void 0 ? '' : _entry$html;\n\n    var setStylePlaceholder2HTML = function setStylePlaceholder2HTML(tpl) {\n      return styles.reduceRight(function (html, styleSrc) {\n        return \"\".concat(genLinkReplaceSymbol(styleSrc)).concat(html);\n      }, tpl);\n    };\n\n    var setScriptPlaceholder2HTML = function setScriptPlaceholder2HTML(tpl) {\n      return scripts.reduce(function (html, scriptSrc) {\n        return \"\".concat(html).concat(genScriptReplaceSymbol(scriptSrc));\n      }, tpl);\n    };\n\n    return getEmbedHTML(getTemplate(setScriptPlaceholder2HTML(setStylePlaceholder2HTML(html))), styles, {\n      fetch: fetch\n    }).then(function (embedHTML) {\n      return {\n        template: embedHTML,\n        assetPublicPath: getPublicPath(entry),\n        getExternalScripts: function getExternalScripts() {\n          return _getExternalScripts(scripts, fetch);\n        },\n        getExternalStyleSheets: function getExternalStyleSheets() {\n          return _getExternalStyleSheets(styles, fetch);\n        },\n        execScripts: function execScripts(proxy, strictGlobal) {\n          var execScriptsHooks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          if (!scripts.length) {\n            return Promise.resolve();\n          }\n\n          return _execScripts(scripts[scripts.length - 1], scripts, proxy, {\n            fetch: fetch,\n            strictGlobal: strictGlobal,\n            beforeExec: execScriptsHooks.beforeExec,\n            afterExec: execScriptsHooks.afterExec\n          });\n        }\n      };\n    });\n  } else {\n    throw new SyntaxError('entry scripts or styles should be array!');\n  }\n}"]}]}