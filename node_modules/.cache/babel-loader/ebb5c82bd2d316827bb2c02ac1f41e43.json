{"remainingRequest":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js!D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\qiankun\\es\\sandbox\\patchers\\windowListener.js","dependencies":[{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\qiankun\\es\\sandbox\\patchers\\windowListener.js","mtime":1631881155000},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618900774989},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js","mtime":1618886346176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9ub29wIGZyb20gImxvZGFzaC9ub29wIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CnZhciByYXdBZGRFdmVudExpc3RlbmVyID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXI7CnZhciByYXdSZW1vdmVFdmVudExpc3RlbmVyID0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhdGNoKGdsb2JhbCkgewogIHZhciBsaXN0ZW5lck1hcCA9IG5ldyBNYXAoKTsKCiAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHsKICAgIHZhciBsaXN0ZW5lcnMgPSBsaXN0ZW5lck1hcC5nZXQodHlwZSkgfHwgW107CiAgICBsaXN0ZW5lck1hcC5zZXQodHlwZSwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShsaXN0ZW5lcnMpLCBbbGlzdGVuZXJdKSk7CiAgICByZXR1cm4gcmF3QWRkRXZlbnRMaXN0ZW5lci5jYWxsKHdpbmRvdywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogIH07CgogIGdsb2JhbC5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7CiAgICB2YXIgc3RvcmVkVHlwZUxpc3RlbmVycyA9IGxpc3RlbmVyTWFwLmdldCh0eXBlKTsKCiAgICBpZiAoc3RvcmVkVHlwZUxpc3RlbmVycyAmJiBzdG9yZWRUeXBlTGlzdGVuZXJzLmxlbmd0aCAmJiBzdG9yZWRUeXBlTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpICE9PSAtMSkgewogICAgICBzdG9yZWRUeXBlTGlzdGVuZXJzLnNwbGljZShzdG9yZWRUeXBlTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTsKICAgIH0KCiAgICByZXR1cm4gcmF3UmVtb3ZlRXZlbnRMaXN0ZW5lci5jYWxsKHdpbmRvdywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogIH07CgogIHJldHVybiBmdW5jdGlvbiBmcmVlKCkgewogICAgbGlzdGVuZXJNYXAuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXJzLCB0eXBlKSB7CiAgICAgIHJldHVybiBfdG9Db25zdW1hYmxlQXJyYXkobGlzdGVuZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgICAgIHJldHVybiBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7CiAgICAgIH0pOwogICAgfSk7CiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciA9IHJhd0FkZEV2ZW50TGlzdGVuZXI7CiAgICBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHJhd1JlbW92ZUV2ZW50TGlzdGVuZXI7CiAgICByZXR1cm4gX25vb3A7CiAgfTsKfQ=="},{"version":3,"sources":["D:/qiankun微前台/Demo/qiankun/qiankun-base/node_modules/qiankun/es/sandbox/patchers/windowListener.js"],"names":["_noop","_toConsumableArray","rawAddEventListener","window","addEventListener","rawRemoveEventListener","removeEventListener","patch","global","listenerMap","Map","type","listener","options","listeners","get","set","concat","call","storedTypeListeners","length","indexOf","splice","free","forEach"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,aAAlB;AACA,OAAOC,kBAAP,MAA+B,8CAA/B;AACA,IAAIC,mBAAmB,GAAGC,MAAM,CAACC,gBAAjC;AACA,IAAIC,sBAAsB,GAAGF,MAAM,CAACG,mBAApC;AACA,eAAe,SAASC,KAAT,CAAeC,MAAf,EAAuB;AACpC,MAAIC,WAAW,GAAG,IAAIC,GAAJ,EAAlB;;AAEAF,EAAAA,MAAM,CAACJ,gBAAP,GAA0B,UAAUO,IAAV,EAAgBC,QAAhB,EAA0BC,OAA1B,EAAmC;AAC3D,QAAIC,SAAS,GAAGL,WAAW,CAACM,GAAZ,CAAgBJ,IAAhB,KAAyB,EAAzC;AACAF,IAAAA,WAAW,CAACO,GAAZ,CAAgBL,IAAhB,EAAsB,GAAGM,MAAH,CAAUhB,kBAAkB,CAACa,SAAD,CAA5B,EAAyC,CAACF,QAAD,CAAzC,CAAtB;AACA,WAAOV,mBAAmB,CAACgB,IAApB,CAAyBf,MAAzB,EAAiCQ,IAAjC,EAAuCC,QAAvC,EAAiDC,OAAjD,CAAP;AACD,GAJD;;AAMAL,EAAAA,MAAM,CAACF,mBAAP,GAA6B,UAAUK,IAAV,EAAgBC,QAAhB,EAA0BC,OAA1B,EAAmC;AAC9D,QAAIM,mBAAmB,GAAGV,WAAW,CAACM,GAAZ,CAAgBJ,IAAhB,CAA1B;;AAEA,QAAIQ,mBAAmB,IAAIA,mBAAmB,CAACC,MAA3C,IAAqDD,mBAAmB,CAACE,OAApB,CAA4BT,QAA5B,MAA0C,CAAC,CAApG,EAAuG;AACrGO,MAAAA,mBAAmB,CAACG,MAApB,CAA2BH,mBAAmB,CAACE,OAApB,CAA4BT,QAA5B,CAA3B,EAAkE,CAAlE;AACD;;AAED,WAAOP,sBAAsB,CAACa,IAAvB,CAA4Bf,MAA5B,EAAoCQ,IAApC,EAA0CC,QAA1C,EAAoDC,OAApD,CAAP;AACD,GARD;;AAUA,SAAO,SAASU,IAAT,GAAgB;AACrBd,IAAAA,WAAW,CAACe,OAAZ,CAAoB,UAAUV,SAAV,EAAqBH,IAArB,EAA2B;AAC7C,aAAOV,kBAAkB,CAACa,SAAD,CAAlB,CAA8BU,OAA9B,CAAsC,UAAUZ,QAAV,EAAoB;AAC/D,eAAOJ,MAAM,CAACF,mBAAP,CAA2BK,IAA3B,EAAiCC,QAAjC,CAAP;AACD,OAFM,CAAP;AAGD,KAJD;AAKAJ,IAAAA,MAAM,CAACJ,gBAAP,GAA0BF,mBAA1B;AACAM,IAAAA,MAAM,CAACF,mBAAP,GAA6BD,sBAA7B;AACA,WAAOL,KAAP;AACD,GATD;AAUD","sourcesContent":["import _noop from \"lodash/noop\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar rawAddEventListener = window.addEventListener;\nvar rawRemoveEventListener = window.removeEventListener;\nexport default function patch(global) {\n  var listenerMap = new Map();\n\n  global.addEventListener = function (type, listener, options) {\n    var listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [].concat(_toConsumableArray(listeners), [listener]));\n    return rawAddEventListener.call(window, type, listener, options);\n  };\n\n  global.removeEventListener = function (type, listener, options) {\n    var storedTypeListeners = listenerMap.get(type);\n\n    if (storedTypeListeners && storedTypeListeners.length && storedTypeListeners.indexOf(listener) !== -1) {\n      storedTypeListeners.splice(storedTypeListeners.indexOf(listener), 1);\n    }\n\n    return rawRemoveEventListener.call(window, type, listener, options);\n  };\n\n  return function free() {\n    listenerMap.forEach(function (listeners, type) {\n      return _toConsumableArray(listeners).forEach(function (listener) {\n        return global.removeEventListener(type, listener);\n      });\n    });\n    global.addEventListener = rawAddEventListener;\n    global.removeEventListener = rawRemoveEventListener;\n    return _noop;\n  };\n}"]}]}