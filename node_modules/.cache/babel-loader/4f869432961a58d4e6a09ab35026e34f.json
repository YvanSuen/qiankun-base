{"remainingRequest":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js!D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\import-html-entry\\esm\\process-tpl.js","dependencies":[{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\import-html-entry\\esm\\process-tpl.js","mtime":499162500000},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618900774989},{"path":"D:\\qiankun微前台\\Demo\\qiankun\\qiankun-base\\node_modules\\babel-loader\\lib\\index.js","mtime":1618886346176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXkiOwovKioKICogQGF1dGhvciBLdWl0b3MKICogQGhvbWVwYWdlIGh0dHBzOi8vZ2l0aHViLmNvbS9rdWl0b3MvCiAqIEBzaW5jZSAyMDE4LTA5LTAzIDE1OjA0CiAqLwoKaW1wb3J0IHsgZ2V0SW5saW5lQ29kZSwgaXNNb2R1bGVTY3JpcHRTdXBwb3J0ZWQgfSBmcm9tICcuL3V0aWxzJzsKdmFyIEFMTF9TQ1JJUFRfUkVHRVggPSAvKDxzY3JpcHRbXHNcU10qPz4pW1xzXFNdKj88XC9zY3JpcHQ+L2dpOwp2YXIgU0NSSVBUX1RBR19SRUdFWCA9IC88KHNjcmlwdClbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdKygoPyF0eXBlPSgnfCcpdGV4dFwvbmdceDJEdGVtcGxhdGVcMylbXHNcU10pKj8+W1xzXFNdKj88XC9cMT4vaTsKdmFyIFNDUklQVF9TUkNfUkVHRVggPSAvLipcc3NyYz0oJ3wiKT8oW14+JyJcc10rKS87CnZhciBTQ1JJUFRfVFlQRV9SRUdFWCA9IC8uKlxzdHlwZT0oJ3wiKT8oW14+JyJcc10rKS87CnZhciBTQ1JJUFRfRU5UUllfUkVHRVggPSAvLipcc2VudHJ5XHMqLiovOwp2YXIgU0NSSVBUX0FTWU5DX1JFR0VYID0gLy4qXHNhc3luY1xzKi4qLzsKdmFyIFNDUklQVF9OT19NT0RVTEVfUkVHRVggPSAvLipcc25vbW9kdWxlXHMqLiovOwp2YXIgU0NSSVBUX01PRFVMRV9SRUdFWCA9IC8uKlxzdHlwZT0oJ3wiKT9tb2R1bGUoJ3wiKT9ccyouKi87CnZhciBMSU5LX1RBR19SRUdFWCA9IC88KGxpbmspW1x0LVxyIFx4QTBcdTE2ODBcdTIwMDAtXHUyMDBBXHUyMDI4XHUyMDI5XHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXStbXHNcU10qPz4vaWc7CnZhciBMSU5LX1BSRUxPQURfT1JfUFJFRkVUQ0hfUkVHRVggPSAvXHNyZWw9KCd8Iik/KHByZWxvYWR8cHJlZmV0Y2gpXDEvOwp2YXIgTElOS19IUkVGX1JFR0VYID0gLy4qXHNocmVmPSgnfCIpPyhbXj4nIlxzXSspLzsKdmFyIExJTktfQVNfRk9OVCA9IC8uKlxzYXM9KCd8Iik/Zm9udFwxLiovOwp2YXIgU1RZTEVfVEFHX1JFR0VYID0gLzxzdHlsZVtePl0qPltcc1xTXSo/PFwvc3R5bGU+L2dpOwp2YXIgU1RZTEVfVFlQRV9SRUdFWCA9IC9ccytyZWw9KCd8Iik/c3R5bGVzaGVldFwxLiovOwp2YXIgU1RZTEVfSFJFRl9SRUdFWCA9IC8uKlxzaHJlZj0oJ3wiKT8oW14+JyJcc10rKS87CnZhciBIVE1MX0NPTU1FTlRfUkVHRVggPSAvPCEtLShbXHNcU10qPyktLT4vZzsKdmFyIExJTktfSUdOT1JFX1JFR0VYID0gLzxsaW5rKFtcdC1cciBceEEwXHUxNjgwXHUyMDAwLVx1MjAwQVx1MjAyOFx1MjAyOVx1MjAyRlx1MjA1Rlx1MzAwMFx1RkVGRl0rfFtcdC1cciBceEEwXHUxNjgwXHUyMDAwLVx1MjAwQVx1MjAyOFx1MjAyOVx1MjAyRlx1MjA1Rlx1MzAwMFx1RkVGRl0rW1xzXFNdK1tcdC1cciBceEEwXHUxNjgwXHUyMDAwLVx1MjAwQVx1MjAyOFx1MjAyOVx1MjAyRlx1MjA1Rlx1MzAwMFx1RkVGRl0rKWlnbm9yZShbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdKnxbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdK1tcc1xTXSp8PVtcc1xTXSopPi9pOwp2YXIgU1RZTEVfSUdOT1JFX1JFR0VYID0gLzxzdHlsZShbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdK3xbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdK1tcc1xTXStbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdKylpZ25vcmUoW1x0LVxyIFx4QTBcdTE2ODBcdTIwMDAtXHUyMDBBXHUyMDI4XHUyMDI5XHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXSp8W1x0LVxyIFx4QTBcdTE2ODBcdTIwMDAtXHUyMDBBXHUyMDI4XHUyMDI5XHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXStbXHNcU10qfD1bXHNcU10qKT4vaTsKdmFyIFNDUklQVF9JR05PUkVfUkVHRVggPSAvPHNjcmlwdChbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdK3xbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdK1tcc1xTXStbXHQtXHIgXHhBMFx1MTY4MFx1MjAwMC1cdTIwMEFcdTIwMjhcdTIwMjlcdTIwMkZcdTIwNUZcdTMwMDBcdUZFRkZdKylpZ25vcmUoW1x0LVxyIFx4QTBcdTE2ODBcdTIwMDAtXHUyMDBBXHUyMDI4XHUyMDI5XHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXSp8W1x0LVxyIFx4QTBcdTE2ODBcdTIwMDAtXHUyMDBBXHUyMDI4XHUyMDI5XHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXStbXHNcU10qfD1bXHNcU10qKT4vaTsKCmZ1bmN0aW9uIGhhc1Byb3RvY29sKHVybCkgewogIHJldHVybiB1cmwuc3RhcnRzV2l0aCgnLy8nKSB8fCB1cmwuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHVybC5zdGFydHNXaXRoKCdodHRwczovLycpOwp9CgpmdW5jdGlvbiBnZXRFbnRpcmVQYXRoKHBhdGgsIGJhc2VVUkkpIHsKICByZXR1cm4gbmV3IFVSTChwYXRoLCBiYXNlVVJJKS50b1N0cmluZygpOwp9CgpmdW5jdGlvbiBpc1ZhbGlkSmF2YVNjcmlwdFR5cGUodHlwZSkgewogIHZhciBoYW5kbGVUeXBlcyA9IFsndGV4dC9qYXZhc2NyaXB0JywgJ21vZHVsZScsICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JywgJ3RleHQvZWNtYXNjcmlwdCcsICdhcHBsaWNhdGlvbi9lY21hc2NyaXB0J107CiAgcmV0dXJuICF0eXBlIHx8IGhhbmRsZVR5cGVzLmluZGV4T2YodHlwZSkgIT09IC0xOwp9CgpleHBvcnQgdmFyIGdlbkxpbmtSZXBsYWNlU3ltYm9sID0gZnVuY3Rpb24gZ2VuTGlua1JlcGxhY2VTeW1ib2wobGlua0hyZWYpIHsKICB2YXIgcHJlbG9hZE9yUHJlZmV0Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHJldHVybiAiPCEtLSAiLmNvbmNhdChwcmVsb2FkT3JQcmVmZXRjaCA/ICdwcmVmZXRjaC9wcmVsb2FkJyA6ICcnLCAiIGxpbmsgIikuY29uY2F0KGxpbmtIcmVmLCAiIHJlcGxhY2VkIGJ5IGltcG9ydC1odG1sLWVudHJ5IC0tPiIpOwp9OwpleHBvcnQgdmFyIGdlblNjcmlwdFJlcGxhY2VTeW1ib2wgPSBmdW5jdGlvbiBnZW5TY3JpcHRSZXBsYWNlU3ltYm9sKHNjcmlwdFNyYykgewogIHZhciBhc3luYyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgcmV0dXJuICI8IS0tICIuY29uY2F0KGFzeW5jID8gJ2FzeW5jJyA6ICcnLCAiIHNjcmlwdCAiKS5jb25jYXQoc2NyaXB0U3JjLCAiIHJlcGxhY2VkIGJ5IGltcG9ydC1odG1sLWVudHJ5IC0tPiIpOwp9OwpleHBvcnQgdmFyIGlubGluZVNjcmlwdFJlcGxhY2VTeW1ib2wgPSAiPCEtLSBpbmxpbmUgc2NyaXB0cyByZXBsYWNlZCBieSBpbXBvcnQtaHRtbC1lbnRyeSAtLT4iOwpleHBvcnQgdmFyIGdlbklnbm9yZUFzc2V0UmVwbGFjZVN5bWJvbCA9IGZ1bmN0aW9uIGdlbklnbm9yZUFzc2V0UmVwbGFjZVN5bWJvbCh1cmwpIHsKICByZXR1cm4gIjwhLS0gaWdub3JlIGFzc2V0ICIuY29uY2F0KHVybCB8fCAnZmlsZScsICIgcmVwbGFjZWQgYnkgaW1wb3J0LWh0bWwtZW50cnkgLS0+Iik7Cn07CmV4cG9ydCB2YXIgZ2VuTW9kdWxlU2NyaXB0UmVwbGFjZVN5bWJvbCA9IGZ1bmN0aW9uIGdlbk1vZHVsZVNjcmlwdFJlcGxhY2VTeW1ib2woc2NyaXB0U3JjLCBtb2R1bGVTdXBwb3J0KSB7CiAgcmV0dXJuICI8IS0tICIuY29uY2F0KG1vZHVsZVN1cHBvcnQgPyAnbm9tb2R1bGUnIDogJ21vZHVsZScsICIgc2NyaXB0ICIpLmNvbmNhdChzY3JpcHRTcmMsICIgaWdub3JlZCBieSBpbXBvcnQtaHRtbC1lbnRyeSAtLT4iKTsKfTsKLyoqCiAqIHBhcnNlIHRoZSBzY3JpcHQgbGluayBmcm9tIHRoZSB0ZW1wbGF0ZQogKiAxLiBjb2xsZWN0IHN0eWxlc2hlZXRzCiAqIDIuIHVzZSBnbG9iYWwgZXZhbCB0byBldmFsdWF0ZSB0aGUgaW5saW5lIHNjcmlwdHMKICogICAgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uI0RpZmZlcmVuY2VfYmV0d2Vlbl9GdW5jdGlvbl9jb25zdHJ1Y3Rvcl9hbmRfZnVuY3Rpb25fZGVjbGFyYXRpb24KICogICAgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2V2YWwjRG9fbm90X2V2ZXJfdXNlX2V2YWwhCiAqIEBwYXJhbSB0cGwKICogQHBhcmFtIGJhc2VVUkkKICogQHN0cmlwU3R5bGVzIHdoZXRoZXIgdG8gc3RyaXAgdGhlIGNzcyBsaW5rcwogKiBAcmV0dXJucyB7e3RlbXBsYXRlOiB2b2lkIHwgc3RyaW5nIHwgKiwgc2NyaXB0czogKltdLCBlbnRyeTogKn19CiAqLwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJvY2Vzc1RwbCh0cGwsIGJhc2VVUkkpIHsKICB2YXIgc2NyaXB0cyA9IFtdOwogIHZhciBzdHlsZXMgPSBbXTsKICB2YXIgZW50cnkgPSBudWxsOwogIHZhciBtb2R1bGVTdXBwb3J0ID0gaXNNb2R1bGVTY3JpcHRTdXBwb3J0ZWQoKTsKICB2YXIgdGVtcGxhdGUgPSB0cGwKICAvKgogIHJlbW92ZSBodG1sIGNvbW1lbnQgZmlyc3QKICAqLwogIC5yZXBsYWNlKEhUTUxfQ09NTUVOVF9SRUdFWCwgJycpLnJlcGxhY2UoTElOS19UQUdfUkVHRVgsIGZ1bmN0aW9uIChtYXRjaCkgewogICAgLyoKICAgIGNoYW5nZSB0aGUgY3NzIGxpbmsKICAgICovCiAgICB2YXIgc3R5bGVUeXBlID0gISFtYXRjaC5tYXRjaChTVFlMRV9UWVBFX1JFR0VYKTsKCiAgICBpZiAoc3R5bGVUeXBlKSB7CiAgICAgIHZhciBzdHlsZUhyZWYgPSBtYXRjaC5tYXRjaChTVFlMRV9IUkVGX1JFR0VYKTsKICAgICAgdmFyIHN0eWxlSWdub3JlID0gbWF0Y2gubWF0Y2goTElOS19JR05PUkVfUkVHRVgpOwoKICAgICAgaWYgKHN0eWxlSHJlZikgewogICAgICAgIHZhciBocmVmID0gc3R5bGVIcmVmICYmIHN0eWxlSHJlZlsyXTsKICAgICAgICB2YXIgbmV3SHJlZiA9IGhyZWY7CgogICAgICAgIGlmIChocmVmICYmICFoYXNQcm90b2NvbChocmVmKSkgewogICAgICAgICAgbmV3SHJlZiA9IGdldEVudGlyZVBhdGgoaHJlZiwgYmFzZVVSSSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3R5bGVJZ25vcmUpIHsKICAgICAgICAgIHJldHVybiBnZW5JZ25vcmVBc3NldFJlcGxhY2VTeW1ib2wobmV3SHJlZik7CiAgICAgICAgfQoKICAgICAgICBzdHlsZXMucHVzaChuZXdIcmVmKTsKICAgICAgICByZXR1cm4gZ2VuTGlua1JlcGxhY2VTeW1ib2wobmV3SHJlZik7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcHJlbG9hZE9yUHJlZmV0Y2hUeXBlID0gbWF0Y2gubWF0Y2goTElOS19QUkVMT0FEX09SX1BSRUZFVENIX1JFR0VYKSAmJiBtYXRjaC5tYXRjaChMSU5LX0hSRUZfUkVHRVgpICYmICFtYXRjaC5tYXRjaChMSU5LX0FTX0ZPTlQpOwoKICAgIGlmIChwcmVsb2FkT3JQcmVmZXRjaFR5cGUpIHsKICAgICAgdmFyIF9tYXRjaCRtYXRjaCA9IG1hdGNoLm1hdGNoKExJTktfSFJFRl9SRUdFWCksCiAgICAgICAgICBfbWF0Y2gkbWF0Y2gyID0gX3NsaWNlZFRvQXJyYXkoX21hdGNoJG1hdGNoLCAzKSwKICAgICAgICAgIGxpbmtIcmVmID0gX21hdGNoJG1hdGNoMlsyXTsKCiAgICAgIHJldHVybiBnZW5MaW5rUmVwbGFjZVN5bWJvbChsaW5rSHJlZiwgdHJ1ZSk7CiAgICB9CgogICAgcmV0dXJuIG1hdGNoOwogIH0pLnJlcGxhY2UoU1RZTEVfVEFHX1JFR0VYLCBmdW5jdGlvbiAobWF0Y2gpIHsKICAgIGlmIChTVFlMRV9JR05PUkVfUkVHRVgudGVzdChtYXRjaCkpIHsKICAgICAgcmV0dXJuIGdlbklnbm9yZUFzc2V0UmVwbGFjZVN5bWJvbCgnc3R5bGUgZmlsZScpOwogICAgfQoKICAgIHJldHVybiBtYXRjaDsKICB9KS5yZXBsYWNlKEFMTF9TQ1JJUFRfUkVHRVgsIGZ1bmN0aW9uIChtYXRjaCwgc2NyaXB0VGFnKSB7CiAgICB2YXIgc2NyaXB0SWdub3JlID0gc2NyaXB0VGFnLm1hdGNoKFNDUklQVF9JR05PUkVfUkVHRVgpOwogICAgdmFyIG1vZHVsZVNjcmlwdElnbm9yZSA9IG1vZHVsZVN1cHBvcnQgJiYgISFzY3JpcHRUYWcubWF0Y2goU0NSSVBUX05PX01PRFVMRV9SRUdFWCkgfHwgIW1vZHVsZVN1cHBvcnQgJiYgISFzY3JpcHRUYWcubWF0Y2goU0NSSVBUX01PRFVMRV9SRUdFWCk7IC8vIGluIG9yZGVyIHRvIGtlZXAgdGhlIGV4ZWMgb3JkZXIgb2YgYWxsIGphdmFzY3JpcHRzCgogICAgdmFyIG1hdGNoZWRTY3JpcHRUeXBlTWF0Y2ggPSBzY3JpcHRUYWcubWF0Y2goU0NSSVBUX1RZUEVfUkVHRVgpOwogICAgdmFyIG1hdGNoZWRTY3JpcHRUeXBlID0gbWF0Y2hlZFNjcmlwdFR5cGVNYXRjaCAmJiBtYXRjaGVkU2NyaXB0VHlwZU1hdGNoWzJdOwoKICAgIGlmICghaXNWYWxpZEphdmFTY3JpcHRUeXBlKG1hdGNoZWRTY3JpcHRUeXBlKSkgewogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9IC8vIGlmIGl0IGlzIGEgZXh0ZXJuYWwgc2NyaXB0CgoKICAgIGlmIChTQ1JJUFRfVEFHX1JFR0VYLnRlc3QobWF0Y2gpICYmIHNjcmlwdFRhZy5tYXRjaChTQ1JJUFRfU1JDX1JFR0VYKSkgewogICAgICAvKgogICAgICBjb2xsZWN0IHNjcmlwdHMgYW5kIHJlcGxhY2UgdGhlIHJlZgogICAgICAqLwogICAgICB2YXIgbWF0Y2hlZFNjcmlwdEVudHJ5ID0gc2NyaXB0VGFnLm1hdGNoKFNDUklQVF9FTlRSWV9SRUdFWCk7CiAgICAgIHZhciBtYXRjaGVkU2NyaXB0U3JjTWF0Y2ggPSBzY3JpcHRUYWcubWF0Y2goU0NSSVBUX1NSQ19SRUdFWCk7CiAgICAgIHZhciBtYXRjaGVkU2NyaXB0U3JjID0gbWF0Y2hlZFNjcmlwdFNyY01hdGNoICYmIG1hdGNoZWRTY3JpcHRTcmNNYXRjaFsyXTsKCiAgICAgIGlmIChlbnRyeSAmJiBtYXRjaGVkU2NyaXB0RW50cnkpIHsKICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1lvdSBzaG91bGQgbm90IHNldCBtdWx0aXBseSBlbnRyeSBzY3JpcHQhJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gYXBwZW5kIHRoZSBkb21haW4gd2hpbGUgdGhlIHNjcmlwdCBub3QgaGF2ZSBhbiBwcm90b2NvbCBwcmVmaXgKICAgICAgICBpZiAobWF0Y2hlZFNjcmlwdFNyYyAmJiAhaGFzUHJvdG9jb2wobWF0Y2hlZFNjcmlwdFNyYykpIHsKICAgICAgICAgIG1hdGNoZWRTY3JpcHRTcmMgPSBnZXRFbnRpcmVQYXRoKG1hdGNoZWRTY3JpcHRTcmMsIGJhc2VVUkkpOwogICAgICAgIH0KCiAgICAgICAgZW50cnkgPSBlbnRyeSB8fCBtYXRjaGVkU2NyaXB0RW50cnkgJiYgbWF0Y2hlZFNjcmlwdFNyYzsKICAgICAgfQoKICAgICAgaWYgKHNjcmlwdElnbm9yZSkgewogICAgICAgIHJldHVybiBnZW5JZ25vcmVBc3NldFJlcGxhY2VTeW1ib2wobWF0Y2hlZFNjcmlwdFNyYyB8fCAnanMgZmlsZScpOwogICAgICB9CgogICAgICBpZiAobW9kdWxlU2NyaXB0SWdub3JlKSB7CiAgICAgICAgcmV0dXJuIGdlbk1vZHVsZVNjcmlwdFJlcGxhY2VTeW1ib2wobWF0Y2hlZFNjcmlwdFNyYyB8fCAnanMgZmlsZScsIG1vZHVsZVN1cHBvcnQpOwogICAgICB9CgogICAgICBpZiAobWF0Y2hlZFNjcmlwdFNyYykgewogICAgICAgIHZhciBhc3luY1NjcmlwdCA9ICEhc2NyaXB0VGFnLm1hdGNoKFNDUklQVF9BU1lOQ19SRUdFWCk7CiAgICAgICAgc2NyaXB0cy5wdXNoKGFzeW5jU2NyaXB0ID8gewogICAgICAgICAgYXN5bmM6IHRydWUsCiAgICAgICAgICBzcmM6IG1hdGNoZWRTY3JpcHRTcmMKICAgICAgICB9IDogbWF0Y2hlZFNjcmlwdFNyYyk7CiAgICAgICAgcmV0dXJuIGdlblNjcmlwdFJlcGxhY2VTeW1ib2wobWF0Y2hlZFNjcmlwdFNyYywgYXN5bmNTY3JpcHQpOwogICAgICB9CgogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9IGVsc2UgewogICAgICBpZiAoc2NyaXB0SWdub3JlKSB7CiAgICAgICAgcmV0dXJuIGdlbklnbm9yZUFzc2V0UmVwbGFjZVN5bWJvbCgnanMgZmlsZScpOwogICAgICB9CgogICAgICBpZiAobW9kdWxlU2NyaXB0SWdub3JlKSB7CiAgICAgICAgcmV0dXJuIGdlbk1vZHVsZVNjcmlwdFJlcGxhY2VTeW1ib2woJ2pzIGZpbGUnLCBtb2R1bGVTdXBwb3J0KTsKICAgICAgfSAvLyBpZiBpdCBpcyBhbiBpbmxpbmUgc2NyaXB0CgoKICAgICAgdmFyIGNvZGUgPSBnZXRJbmxpbmVDb2RlKG1hdGNoKTsgLy8gcmVtb3ZlIHNjcmlwdCBibG9ja3Mgd2hlbiBhbGwgb2YgdGhlc2UgbGluZXMgYXJlIGNvbW1lbnRzLgoKICAgICAgdmFyIGlzUHVyZUNvbW1lbnRCbG9jayA9IGNvZGUuc3BsaXQoL1tcclxuXSsvKS5ldmVyeShmdW5jdGlvbiAobGluZSkgewogICAgICAgIHJldHVybiAhbGluZS50cmltKCkgfHwgbGluZS50cmltKCkuc3RhcnRzV2l0aCgnLy8nKTsKICAgICAgfSk7CgogICAgICBpZiAoIWlzUHVyZUNvbW1lbnRCbG9jaykgewogICAgICAgIHNjcmlwdHMucHVzaChtYXRjaCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbmxpbmVTY3JpcHRSZXBsYWNlU3ltYm9sOwogICAgfQogIH0pOwogIHNjcmlwdHMgPSBzY3JpcHRzLmZpbHRlcihmdW5jdGlvbiAoc2NyaXB0KSB7CiAgICAvLyBmaWx0ZXIgZW1wdHkgc2NyaXB0CiAgICByZXR1cm4gISFzY3JpcHQ7CiAgfSk7CiAgcmV0dXJuIHsKICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSwKICAgIHNjcmlwdHM6IHNjcmlwdHMsCiAgICBzdHlsZXM6IHN0eWxlcywKICAgIC8vIHNldCB0aGUgbGFzdCBzY3JpcHQgYXMgZW50cnkgaWYgaGF2ZSBub3Qgc2V0CiAgICBlbnRyeTogZW50cnkgfHwgc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdCiAgfTsKfQ=="},{"version":3,"sources":["D:/qiankun微前台/Demo/qiankun/qiankun-base/node_modules/import-html-entry/esm/process-tpl.js"],"names":["_slicedToArray","getInlineCode","isModuleScriptSupported","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","hasProtocol","url","startsWith","getEntirePath","path","baseURI","URL","toString","isValidJavaScriptType","type","handleTypes","indexOf","genLinkReplaceSymbol","linkHref","preloadOrPrefetch","arguments","length","undefined","concat","genScriptReplaceSymbol","scriptSrc","async","inlineScriptReplaceSymbol","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","moduleSupport","processTpl","tpl","scripts","styles","entry","template","replace","match","styleType","styleHref","styleIgnore","href","newHref","push","preloadOrPrefetchType","_match$match","_match$match2","test","scriptTag","scriptIgnore","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptType","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","asyncScript","src","code","isPureCommentBlock","split","every","line","trim","filter","script"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\n/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2018-09-03 15:04\n */\nimport { getInlineCode, isModuleScriptSupported } from './utils';\nvar ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nvar SCRIPT_TAG_REGEX = /<(script)[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+((?!type=('|')text\\/ng\\x2Dtemplate\\3)[\\s\\S])*?>[\\s\\S]*?<\\/\\1>/i;\nvar SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nvar SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nvar SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nvar SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nvar LINK_TAG_REGEX = /<(link)[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*?>/ig;\nvar LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch)\\1/;\nvar LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nvar STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nvar STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nvar STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nvar LINK_IGNORE_REGEX = /<link([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar STYLE_IGNORE_REGEX = /<style([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar SCRIPT_IGNORE_REGEX = /<script([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]+[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+)ignore([\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*|[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+[\\s\\S]*|=[\\s\\S]*)>/i;\n\nfunction hasProtocol(url) {\n  return url.startsWith('//') || url.startsWith('http://') || url.startsWith('https://');\n}\n\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\n\nfunction isValidJavaScriptType(type) {\n  var handleTypes = ['text/javascript', 'module', 'application/javascript', 'text/ecmascript', 'application/ecmascript'];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\n\nexport var genLinkReplaceSymbol = function genLinkReplaceSymbol(linkHref) {\n  var preloadOrPrefetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return \"<!-- \".concat(preloadOrPrefetch ? 'prefetch/preload' : '', \" link \").concat(linkHref, \" replaced by import-html-entry -->\");\n};\nexport var genScriptReplaceSymbol = function genScriptReplaceSymbol(scriptSrc) {\n  var async = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return \"<!-- \".concat(async ? 'async' : '', \" script \").concat(scriptSrc, \" replaced by import-html-entry -->\");\n};\nexport var inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by import-html-entry -->\";\nexport var genIgnoreAssetReplaceSymbol = function genIgnoreAssetReplaceSymbol(url) {\n  return \"<!-- ignore asset \".concat(url || 'file', \" replaced by import-html-entry -->\");\n};\nexport var genModuleScriptReplaceSymbol = function genModuleScriptReplaceSymbol(scriptSrc, moduleSupport) {\n  return \"<!-- \".concat(moduleSupport ? 'nomodule' : 'module', \" script \").concat(scriptSrc, \" ignored by import-html-entry -->\");\n};\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\n\nexport default function processTpl(tpl, baseURI) {\n  var scripts = [];\n  var styles = [];\n  var entry = null;\n  var moduleSupport = isModuleScriptSupported();\n  var template = tpl\n  /*\n  remove html comment first\n  */\n  .replace(HTML_COMMENT_REGEX, '').replace(LINK_TAG_REGEX, function (match) {\n    /*\n    change the css link\n    */\n    var styleType = !!match.match(STYLE_TYPE_REGEX);\n\n    if (styleType) {\n      var styleHref = match.match(STYLE_HREF_REGEX);\n      var styleIgnore = match.match(LINK_IGNORE_REGEX);\n\n      if (styleHref) {\n        var href = styleHref && styleHref[2];\n        var newHref = href;\n\n        if (href && !hasProtocol(href)) {\n          newHref = getEntirePath(href, baseURI);\n        }\n\n        if (styleIgnore) {\n          return genIgnoreAssetReplaceSymbol(newHref);\n        }\n\n        styles.push(newHref);\n        return genLinkReplaceSymbol(newHref);\n      }\n    }\n\n    var preloadOrPrefetchType = match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n\n    if (preloadOrPrefetchType) {\n      var _match$match = match.match(LINK_HREF_REGEX),\n          _match$match2 = _slicedToArray(_match$match, 3),\n          linkHref = _match$match2[2];\n\n      return genLinkReplaceSymbol(linkHref, true);\n    }\n\n    return match;\n  }).replace(STYLE_TAG_REGEX, function (match) {\n    if (STYLE_IGNORE_REGEX.test(match)) {\n      return genIgnoreAssetReplaceSymbol('style file');\n    }\n\n    return match;\n  }).replace(ALL_SCRIPT_REGEX, function (match, scriptTag) {\n    var scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n    var moduleScriptIgnore = moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX) || !moduleSupport && !!scriptTag.match(SCRIPT_MODULE_REGEX); // in order to keep the exec order of all javascripts\n\n    var matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n    var matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n\n    if (!isValidJavaScriptType(matchedScriptType)) {\n      return match;\n    } // if it is a external script\n\n\n    if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n      /*\n      collect scripts and replace the ref\n      */\n      var matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n      var matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n      var matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n\n      if (entry && matchedScriptEntry) {\n        throw new SyntaxError('You should not set multiply entry script!');\n      } else {\n        // append the domain while the script not have an protocol prefix\n        if (matchedScriptSrc && !hasProtocol(matchedScriptSrc)) {\n          matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n        }\n\n        entry = entry || matchedScriptEntry && matchedScriptSrc;\n      }\n\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol(matchedScriptSrc || 'js file');\n      }\n\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol(matchedScriptSrc || 'js file', moduleSupport);\n      }\n\n      if (matchedScriptSrc) {\n        var asyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n        scripts.push(asyncScript ? {\n          async: true,\n          src: matchedScriptSrc\n        } : matchedScriptSrc);\n        return genScriptReplaceSymbol(matchedScriptSrc, asyncScript);\n      }\n\n      return match;\n    } else {\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol('js file');\n      }\n\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol('js file', moduleSupport);\n      } // if it is an inline script\n\n\n      var code = getInlineCode(match); // remove script blocks when all of these lines are comments.\n\n      var isPureCommentBlock = code.split(/[\\r\\n]+/).every(function (line) {\n        return !line.trim() || line.trim().startsWith('//');\n      });\n\n      if (!isPureCommentBlock) {\n        scripts.push(match);\n      }\n\n      return inlineScriptReplaceSymbol;\n    }\n  });\n  scripts = scripts.filter(function (script) {\n    // filter empty script\n    return !!script;\n  });\n  return {\n    template: template,\n    scripts: scripts,\n    styles: styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1]\n  };\n}"]}]}